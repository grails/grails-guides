<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>6.4 Static Scaffolding</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/guide.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />            
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Grails Framework Guide 
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/training.html"><strong>1</strong><span>Grails Training</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/creatingTheApp.html"><strong>3</strong><span>Creating your Grails App</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/runningTheApp.html"><strong>4</strong><span>Running the App</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/domainClasses.html"><strong>5</strong><span>Domain Classes</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/controllers.html"><strong>6</strong><span>Controllers</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/views.html"><strong>7</strong><span>Views</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/services.html"><strong>8</strong><span>Services</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/testing.html"><strong>9</strong><span>Testing your App</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/deployment.html"><strong>10</strong><span>Deploying your App</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../../guide/helpWithGrails.html"><strong>11</strong><span>Do you need help with Grails?</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/domainClasses.html">&lt;&lt; <strong>5</strong><span>Domain Classes</span></a></div>
                

                
                    <div class="toc-item next-right"><a href="../../guide/views.html"><strong>7</strong><span>Views</span> >></a></div>
                


                

                

<h2 id="staticScaffolding">6.4 Static Scaffolding</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/creating-your-first-grails-app/edit/master/src/main/docs/guide/staticScaffolding.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Dynamic scaffolding is powerful and sometimes will provide all the functionality you need (especially for an administrative site where data access is more important than presentation). But it&#8217;s quite likely that you will feel the need to customize the generated views and controllers, either to change their appearance or to add custom logic and functionality. Grails anticipates this need and provides a set of <code>generate</code> commands that can generate the controllers and/or views that you just saw, allowing you to modify them to suite your needs.</p>
</div>
<div class="paragraph">
<p>To generate the views (and continue to use the dynamic scaffolding):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./grailsw generate-views Vehicle</code></pre>
</div>
</div>
<div class="paragraph">
<p>To generate the controller (and continue to use the dynamic GSP views):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./grailsw generate-controller Vehicle</code></pre>
</div>
</div>
<div class="paragraph">
<p>To both views and controllers (bypassing all dynamic generation):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./grailsw generate-all Vehicle</code></pre>
</div>
</div>
<div class="paragraph">
<p>The generated controller will be placed under <code>grails-app/controller</code>, and the generated views will be placed under <code>grails-app/views/vehicle</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
To override existing files, use th <code>-force</code> flag along with the <code>generate-*</code> command: <code>./grailsw generate-all com.example.Vehicle -force</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s generate the controller and views for <code>Vehicle</code> and take a look at the resulting controller.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./grailsw generate-all Vehicle -force</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open the <code>VehicleController.groovy</code> file at <code>grails-app/controllers/org/grails/guides/</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.springframework.http.HttpStatus.NOT_FOUND</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.springframework.http.HttpStatus.OK</span>
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.springframework.http.HttpStatus.CREATED</span>
<span class="keyword">import</span> <span class="include">org.grails.guides.Vehicle</span>
<span class="keyword">import</span> <span class="include">grails.gorm.transactions.Transactional</span>

<span class="annotation">@SuppressWarnings</span>([<span class="string"><span class="delimiter">'</span><span class="content">LineLength</span><span class="delimiter">'</span></span>])
<span class="annotation">@ReadOnly</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="type">class</span> <span class="class">VehicleController</span> {

    <span class="directive">static</span> namespace = <span class="string"><span class="delimiter">'</span><span class="content">scaffolding</span><span class="delimiter">'</span></span>

    <span class="directive">static</span> allowedMethods = [<span class="key">save</span>: <span class="string"><span class="delimiter">'</span><span class="content">POST</span><span class="delimiter">'</span></span>, <span class="key">update</span>: <span class="string"><span class="delimiter">'</span><span class="content">PUT</span><span class="delimiter">'</span></span>, <span class="key">delete</span>: <span class="string"><span class="delimiter">'</span><span class="content">DELETE</span><span class="delimiter">'</span></span>]

    <span class="keyword">def</span> <span class="function">index</span>(<span class="predefined-type">Integer</span> max) {
        params.max = <span class="predefined-type">Math</span>.min(max ?: <span class="integer">10</span>, <span class="integer">100</span>) <i class="conum" data-value="2"></i><b>(2)</b>
        respond Vehicle.list(params), <span class="key">model</span>:[<span class="key">vehicleCount</span>: Vehicle.count()] <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="keyword">def</span> <span class="function">show</span>(Vehicle vehicle) {
        respond vehicle <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="annotation">@SuppressWarnings</span>([<span class="string"><span class="delimiter">'</span><span class="content">FactoryMethodName</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">GrailsMassAssignment</span><span class="delimiter">'</span></span>])
    <span class="keyword">def</span> <span class="function">create</span>() {
        respond <span class="keyword">new</span> Vehicle(params) <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="annotation">@Transactional</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">def</span> <span class="function">save</span>(Vehicle vehicle) {
        <span class="keyword">if</span> (vehicle == <span class="predefined-constant">null</span>) {
            transactionStatus.setRollbackOnly()
            notFound()
            <span class="keyword">return</span>
        }

        <span class="keyword">if</span> (vehicle.hasErrors()) {
            transactionStatus.setRollbackOnly()
            respond vehicle.errors, <span class="key">view</span>:<span class="string"><span class="delimiter">'</span><span class="content">create</span><span class="delimiter">'</span></span>  <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="keyword">return</span>
        }

        vehicle.save <span class="key">flush</span>:<span class="predefined-constant">true</span>

        request.withFormat {  <i class="conum" data-value="4"></i><b>(4)</b>
            form multipartForm {
                <i class="conum" data-value="5"></i><b>(5)</b>
                flash.message = message(<span class="key">code</span>: <span class="string"><span class="delimiter">'</span><span class="content">default.created.message</span><span class="delimiter">'</span></span>, <span class="key">args</span>: [message(<span class="key">code</span>: <span class="string"><span class="delimiter">'</span><span class="content">vehicle.label</span><span class="delimiter">'</span></span>, <span class="keyword">default</span>: <span class="string"><span class="delimiter">'</span><span class="content">Vehicle</span><span class="delimiter">'</span></span>), vehicle.id])
                redirect vehicle
            }
            <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span> { respond vehicle, [<span class="key">status</span>: CREATED] } <i class="conum" data-value="3"></i><b>(3)</b>
        }
    }

    <span class="keyword">def</span> <span class="function">edit</span>(Vehicle vehicle) {
        respond vehicle <i class="conum" data-value="3"></i><b>(3)</b>
    }

    <span class="annotation">@Transactional</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">def</span> <span class="function">update</span>(Vehicle vehicle) {
        <span class="keyword">if</span> (vehicle == <span class="predefined-constant">null</span>) {
            transactionStatus.setRollbackOnly()
            notFound()
            <span class="keyword">return</span>
        }

        <span class="keyword">if</span> (vehicle.hasErrors()) {
            transactionStatus.setRollbackOnly()
            respond vehicle.errors, <span class="key">view</span>:<span class="string"><span class="delimiter">'</span><span class="content">edit</span><span class="delimiter">'</span></span> <i class="conum" data-value="3"></i><b>(3)</b>
            <span class="keyword">return</span>
        }

        vehicle.save <span class="key">flush</span>:<span class="predefined-constant">true</span>

        request.withFormat {
            form multipartForm {
                <i class="conum" data-value="5"></i><b>(5)</b>
                flash.message = message(<span class="key">code</span>: <span class="string"><span class="delimiter">'</span><span class="content">default.updated.message</span><span class="delimiter">'</span></span>, <span class="key">args</span>: [message(<span class="key">code</span>: <span class="string"><span class="delimiter">'</span><span class="content">vehicle.label</span><span class="delimiter">'</span></span>, <span class="keyword">default</span>: <span class="string"><span class="delimiter">'</span><span class="content">Vehicle</span><span class="delimiter">'</span></span>), vehicle.id])
                redirect vehicle <i class="conum" data-value="6"></i><b>(6)</b>
            }
            <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span> { respond vehicle, [<span class="key">status</span>: OK] } <i class="conum" data-value="3"></i><b>(3)</b>
        }
    }

    <span class="annotation">@Transactional</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">def</span> <span class="function">delete</span>(Vehicle vehicle) {

        <span class="keyword">if</span> (vehicle == <span class="predefined-constant">null</span>) {
            transactionStatus.setRollbackOnly()
            notFound()
            <span class="keyword">return</span>
        }

        vehicle.delete <span class="key">flush</span>:<span class="predefined-constant">true</span>

        request.withFormat {
            form multipartForm {
                <i class="conum" data-value="5"></i><b>(5)</b>
                flash.message = message(<span class="key">code</span>: <span class="string"><span class="delimiter">'</span><span class="content">default.deleted.message</span><span class="delimiter">'</span></span>, <span class="key">args</span>: [message(<span class="key">code</span>: <span class="string"><span class="delimiter">'</span><span class="content">vehicle.label</span><span class="delimiter">'</span></span>, <span class="keyword">default</span>: <span class="string"><span class="delimiter">'</span><span class="content">Vehicle</span><span class="delimiter">'</span></span>), vehicle.id])
                redirect <span class="key">action</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>, <span class="key">method</span>: <span class="string"><span class="delimiter">'</span><span class="content">GET</span><span class="delimiter">'</span></span> <i class="conum" data-value="6"></i><b>(6)</b>
            }
            <span class="string"><span class="delimiter">'</span><span class="content">*</span><span class="delimiter">'</span></span> { render <span class="key">status</span>: NO_CONTENT } <i class="conum" data-value="7"></i><b>(7)</b>
        }
    }

    <span class="directive">protected</span> <span class="type">void</span> notFound() {
        request.withFormat {
            form multipartForm {
                <i class="conum" data-value="5"></i><b>(5)</b>
                flash.message = message(<span class="key">code</span>: <span class="string"><span class="delimiter">'</span><span class="content">default.not.found.message</span><span class="delimiter">'</span></span>, <span class="key">args</span>: [message(<span class="key">code</span>: <span class="string"><span class="delimiter">'</span><span class="content">vehicle.label</span><span class="delimiter">'</span></span>, <span class="keyword">default</span>: <span class="string"><span class="delimiter">'</span><span class="content">Vehicle</span><span class="delimiter">'</span></span>), params.id])</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <a href="http://gorm.grails.org/latest/api/grails/gorm/transactions/Transactional.html"><code>@Transactional</code></a> annotation configures the transactional behavior of the controller or method. Transactions are used to manage persistence and other complicated operations that should be completed together (and potentially rolled-back if any one of the steps fails).  For more information on transactions, see the <a href="http://docs.grails.org/latest/guide/single.html#declarativeTransactions">Grails documentation</a></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>params</code> object is available to all controllers, and contains a map of any URL parameters on the request. You can refer to any parameter by name to retrieve the value: <code>params.myCustomParameter</code> will match this URL parameter: <code>[url]?myCustomParameter=hello</code>. See the <a href="https://docs.grails.org/latest/ref/Controllers/params.html">Grails documentation</a> for more detail.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>respond</code> method takes an object to return to the requestor, using <a href="https://docs.grails.org/latest/guide/theWebLayer.html#contentNegotiation">content negotiation</a> to choose the correct type (for example, a request&#8217;s <code>Accept</code> header might specify JSON or XML). <code>respond</code> also can accept a map of arguments, such as <code>model</code> (which defines the way the data is loaded on a page). For more on how to use the <code>respond</code> method, see the <a href="https://docs.grails.org/latest/ref/Controllers/respond.html">Grails documentation</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>request</code> is available on all controllers, and is an instance of the Servlet API’s <a href="https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html">HttpServletRequest</a> class. You can access request headers, store properties in the request scope, and get information about the requestor using this object. For more see the <a href="https://docs.grails.org/latest/ref/Controllers/request.html">Grails documentation on <code>request</code></a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>flash</code> is a map that stores objects within the session for the <strong>next</strong> request, automatically clearing them after that next request completes. This is useful for passing error messages or other data that you want the next request to access. For more, see the <a href="https://docs.grails.org/latest/ref/Controllers/flash.html">Grails documentation on <code>flash</code></a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The <code>redirect</code> method is a simple one - it allows the action to redirect the request to another action, controller, or a URI. You can also pass along parameters with the redirect. See the <a href="https://docs.grails.org/latest/ref/Controllers/redirect.html">Grails documentation on <code>redirect</code></a> for more.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The <code>render</code> method is a less sophisticated version of <code>respond</code> - it doesn&#8217;t perform content negotiation, so you have to specify exactly what you want to render. You can render plain text, a view or template, an HTTP response code, or any object that has a String representation. See the <a href="https://docs.grails.org/latest/ref/Controllers/render.html">Grails documentation</a>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>That&#8217;s a lot of code! Generating and modifying a scaffold controller is a good learning exercise, so feel free to experiment and modify this code - you can always revert back to the version in the <code>completed</code> project of this guide.</p>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/domainClasses.html">&lt;&lt; <strong>5</strong><span>Domain Classes</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/views.html"><strong>7</strong><span>Views</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title" style="text-align: right"><a href="https://travis-ci.org/grails-guides/creating-your-first-grails-app"><img src="https://travis-ci.org/grails-guides/creating-your-first-grails-app.svg?branch=master" /></a></div>            
                 <div class="local-title">
                    <a href="https://github.com/grails-guides/creating-your-first-grails-app">
                    <svg height="35" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="35" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a> &nbsp;&nbsp;Get the Code
                </div>
                <div class="menu">
                    <div class="input-group">                        
                        <button href="#" onclick="document.getElementById('github-url').value='git@github.com:grails-guides/creating-your-first-grails-app.git'" class="codeButton">SSH</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/creating-your-first-grails-app.git'" class="codeButton">HTTPS</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/creating-your-first-grails-app'" class="codeButton">Subversion</button>
                    </div>
       
                    <div class="input-group">                    
                        <!-- Target -->
                        <input id="github-url" value="git@github.com:grails-guides/creating-your-first-grails-app.git" type="text" />

                        <!-- Trigger -->
                        <button class="clipbtn" type="button" data-clipboard-target="#github-url">

                            <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
                        </button>       

                    </div>
                    <div class="input-group">
                      <a href="https://github.com/grails-guides/creating-your-first-grails-app/archive/master.zip" class="downloadButton">Download ZIP</a>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. All guides are released with an ASLv2 license for the code, and Creative Commons license for the writing.
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
