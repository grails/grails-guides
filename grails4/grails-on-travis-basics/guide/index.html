<!DOCTYPE html>
<html>
  <head>
    <meta name='google-site-verification' content='REYQ1_I6HGowAE7LOLVqfQbnKaB4IfFpMlGzMbJj55Q' />
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <link rel='icon' href='/images/favicon.ico' />
    <link rel='mask-icon' href='//images/grails-pinned-icon.svg' color='feb672' />
    <meta charset='UTF-8' />
    <title>Grails on Travis Basics | Grails Guides | Grails Framework</title>
    <meta name='description' content='Grails on Travis Basics. In this guide, we will learn how to setup Travis CI to build and test a Grails application.' />
    <link rel='stylesheet' href='../css/main.css' />
    <link rel='stylesheet' href='../css/screen.css' />
    <script src='https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js'></script>
  </head>
  <body class='guide'><header class='mainheader'>
  <div class='content'>
    <a href='https://grails.org/index.html'><img class='grailslogo' src='/images/grails_logo.svg' alt='Grails Logo' /></a>
    <a href='javascript:show(&apos;topmenus&apos;, &apos;showNavigationLink&apos;)' id='showNavigationLink' class='mobile align-center'>Show Navigation</a>
    <div id='topmenus'>
      <nav class='secondarymenu' id='secondarymenu'><ul>
  <li>
    <a href='https://grails.org/learning.html'>Learning</a>
  </li>
  <li>
    <a href='https://grails.org/community.html'>Community</a>
  </li>
  <li>
    <a href='https://grails.org/search.html'>Search</a>
  </li>
</ul></nav>
      <nav class='mainmenu' id='mainmenu'><ul>
  <li>
    <a href='https://grails.org/documentation.html'>Documentation</a>
  </li>
  <li>
    <a href='https://grails.org/download.html'>Download</a>
  </li>
  <li>
    <a href='https://plugins.grails.org'>Plugins</a>
  </li>
  <li>
    <a href='https://guides.grails.org/index.html'>Guides</a>
  </li>
  <li>
    <a href='https://grails.org/faq.html'>FAQ</a>
  </li>
  <li>
    <a href='https://grails.org/support.html'>Support</a>
  </li>
</ul></nav>
    </div>
  </div>
</header><div class='fullwidth'><article class="guide">
    <aside>
        <a href="https://travis-ci.org/grails-guides/grails-on-travis-basics"><img src="https://travis-ci.org/grails-guides/grails-on-travis-basics.svg?branch=master"></a>

        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/grails-guides/grails-on-travis-basics&quot;"><img height="15" src="../img/github_white.svg" alt="Github"/><span>&nbsp;Get the Code</span></button>


        <ul class="githublinks">
            <li><button type="button" class="btn btn-default" href="#" onclick="document.getElementById('github-url').value='git@github.com:grails-guides/grails-on-travis-basics.git'" class="codeButton">SSH</button></li>
            <li><button type="button" class="btn btn-default" onclick="document.getElementById('github-url').value='https://github.com/grails-guides/grails-on-travis-basics.git'" class="codeButton">HTTPS</button></li>
        </ul>
        <div class="input-group">
            <!-- Target -->
            <input id="github-url" value="git@github.com:grails-guides/grails-on-travis-basics.git" type="text" />
            <!-- Trigger -->
            <button type="button" class="clippy btn btn-default" type="button" data-clipboard-target="#github-url">
                <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
            </button>
        </div>
        <script>var clipboard = new Clipboard('.clippy');</script>
        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/grails-guides/grails-on-travis-basics/archive/master.zip&quot;">Download ZIP</button>
        
        <div id="table-of-content">
            <h3>Table of Contents</h3>
            
            <div class="toc-item" style="margin-left:0px"><a href="#training"><strong>1</strong><span>Grails Training</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#gettingStarted"><strong>2</strong><span>Getting Started</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#requirements"><strong>2.1</strong><span>What you will need</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#howto"><strong>2.2</strong><span>How to complete the guide</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#writingTheApp"><strong>3</strong><span>Writing the Application</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#unitTest"><strong>3.1</strong><span>Unit Test</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#integrationTest"><strong>3.2</strong><span>Integration Test</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#testLogging"><strong>3.3</strong><span>Verbose Test Output</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#runTests"><strong>3.4</strong><span>Run Tests</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#createGitHubRepo"><strong>4</strong><span>Create GitHub Repo</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#grantPermissions"><strong>4.1</strong><span>Grant File Permissions for Execution</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#integrateTravis"><strong>5</strong><span>Integrate Travis CI</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#createTravisConfig"><strong>5.1</strong><span>Create Travis Config File</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#delegateToScript"><strong>5.2</strong><span>Delegate to Script File</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#helpWithGrails"><strong>6</strong><span>Help with Grails</span></a></div>
            
            <div style="clear:both" ></div>
        </div>
        
    </aside>
    <header>
        <h1>Grails on Travis Basics</h1>
        <p>In this guide, we will learn how to setup Travis CI to build and test a Grails application.</p>
        <p><strong>Authors:</strong> Nirav Assar, Sergio del Amo</p>
        <p><strong>Grails Version:</strong> 4.0.1</p>
    </header>
    

<h1 id="training">1 Grails Training</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/training.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p><strong>Grails Training</strong> - Developed and delivered by the folks who created and actively maintain the Grails framework!.</p>
</div>
<div id="ocitraining"></div>
<script type="text/javascript">
var getJSON = function(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'json';
    xhr.onload = function() {
      var status = xhr.status;
      if (status == 200) {
        callback(null, xhr.response);
      } else {
        callback(status);
      }
    };
    xhr.send();
};
getJSON('https://training.grails.org/training', function(err, data) {
  var msg = '';
  if (err != null) {
      msg = 'Something went wrong while retrieving OCI training offerings';

  } else {
      if ( data.length == 0 ) {
         msg = '<p><b>Nothing scheduled at the moment - please check back again soon!</b></p>.';

      } else {
        msg += '<table>';
        msg += '<thead>';
        msg += '<tr><th>Course</th><th>Date(s)</th><th>Instructor(s)</th><th>Hour(s)</th></tr>';
        msg += '</thead>';
        msg += '<tbody>';

        var hrefs = new Array();
        for (var i = 0; i < data.length; i++) {
            var href = data[i].enrollmentLink;
            if (hrefs.indexOf(href) == -1) {
                msg += '<tr><td><a href="'+ href + '">'+ data[i].course + '</a></td><td>'+ data[i].dates + '</td><td>'+ data[i].instructors + '</td><td>'+ data[i].hours + '</td></tr>';
                hrefs.push(href);
            }

        }
        msg += '</tbody>';
        msg += '</table>';
      }
  }
  var ociTraining = document.getElementById("ocitraining");
  ociTraining.innerHTML = msg;
});
</script>


<h1 id="gettingStarted">2 Getting Started</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/gettingStarted.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Every software project needs <a href="https://docs.travis-ci.com/user/for-beginners#What-is-Continuous-Integration-(CI)">Continuous Integration (CI)</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
Continuous Integration is the practice of merging in small code changes frequently - rather than merging in a large change
at the end of a development cycle. The goal is to build healthier software by developing and testing in smaller increments.
</blockquote>
<div class="attribution">
&#8212; Travis CI Docs
</div>
</div>
<div class="paragraph">
<p>Travis CI is a continuous integration platform seamlessly integrated with GitHub.  It supports your development process by automatically
building, testing and deploying code changes.</p>
</div>
<div class="paragraph">
<p>In this guide you are going to create a Grails application on GitHub and use <a href="https://www.travis-ci.com/">Travis CI</a> to build
and test your code. This guide assumes you are familiar with Git and GitHub. It also assumes that you already have a <a href="https://github.com/features#documentation">GitHub</a> account.
The guide will cover only build and test an Grails application with Travis.  However, Travis CI has the <a href="https://docs.travis-ci.com/user/customizing-the-build">ability to deploy, send notifications, and
highly customize CI jobs</a>.</p>
</div>
<div class="paragraph">
<p>Travis has a free plan for open source projects. Thus, it is really convenient to build and test an open source Grails Plugin which you may wish to
contribute to the community.</p>
</div>


<h2 id="requirements">2.1 What you will need</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/requirements.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To complete this guide, you will need the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some time on your hands</p>
</li>
<li>
<p>A decent text editor or IDE</p>
</li>
<li>
<p>JDK 1.8 or greater installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
</ul>
</div>


<h2 id="howto">2.2 How to complete the guide</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/howto.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To get started do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/grails-guides/grails-on-travis-basics/archive/master.zip">Download</a> and unzip the source</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clone the <a href="https://git-scm.com/">Git</a> repository:<br>
<code>git clone <a href="https://github.com/grails-guides/grails-on-travis-basics.git" class="bare">https://github.com/grails-guides/grails-on-travis-basics.git</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Grails guides repositories contain two folders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>initial</code>  Initial project. Often a simple Grails app with some additional code to give you a head-start.</p>
</li>
<li>
<p><code>complete</code> A completed example. It is the result of working through the steps presented by the guide and applying those changes to the <code>initial</code> folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To complete the guide, go to the <code>initial</code> folder</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cd</code> into <code>grails-guides/grails-on-travis-basics/initial</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and follow the instructions in the next sections.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can go right to the <strong>completed example</strong> if you <code>cd</code> into <code>grails-guides/grails-on-travis-basics/complete</code>
</td>
</tr>
</table>
</div>


<h1 id="writingTheApp">3 Writing the Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/writingTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The <code>initial</code> project contains a Grails Application created with the <code>web</code> profile and the <code>geb2</code> feature
with the <a href="http://start.grails.org">Grails Application Forge</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/appforge.png" alt="appforge">
</div>
</div>
<div class="paragraph">
<p>The <code>geb2</code> features includes a dependency to the latest version of <a href="http://gebish.org">Geb</a> which is not compatible with JDK 1.7. If you need to support 1.7 use the <strong>geb</strong> feature
instead.</p>
</div>
<div class="paragraph">
<p>Using the <code>geb2</code> feature modifies your build.gradle as follows:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">buildscript {
...
    dependencies {
    ...
        classpath <span class="string"><span class="delimiter">&quot;</span><span class="content">gradle.plugin.com.github.erdi.webdriver-binaries:webdriver-binaries-gradle-plugin:2.1</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b>
    }
}
...
...
...
apply <span class="key">plugin</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">com.github.erdi.webdriver-binaries</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b>

...
...
...

dependencies {
    ...
    ...
    testCompile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.grails.plugins:geb</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="2"></i><b>(2)</b>
    testRuntime <span class="string"><span class="delimiter">&quot;</span><span class="content">org.seleniumhq.selenium:selenium-chrome-driver:3.141.59</span><span class="delimiter">&quot;</span></span>  <i class="conum" data-value="3"></i><b>(3)</b>
    testRuntime <span class="string"><span class="delimiter">&quot;</span><span class="content">org.seleniumhq.selenium:selenium-firefox-driver:3.141.59</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="4"></i><b>(4)</b>
    testCompile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.seleniumhq.selenium:selenium-remote-driver:3.141.59</span><span class="delimiter">&quot;</span></span>  <i class="conum" data-value="5"></i><b>(5)</b>
    testCompile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.seleniumhq.selenium:selenium-api:3.141.59</span><span class="delimiter">&quot;</span></span>            <i class="conum" data-value="5"></i><b>(5)</b>
    testCompile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.seleniumhq.selenium:selenium-support:3.141.59</span><span class="delimiter">&quot;</span></span>        <i class="conum" data-value="5"></i><b>(5)</b>
    testCompile <span class="string"><span class="delimiter">&quot;</span><span class="content">org.seleniumhq.selenium:htmlunit-driver:2.35.1</span><span class="delimiter">&quot;</span></span>
    testRuntime <span class="string"><span class="delimiter">'</span><span class="content">net.sourceforge.htmlunit:htmlunit:2.35.0</span><span class="delimiter">'</span></span>
}

webdriverBinaries {
    chromedriver <span class="string"><span class="delimiter">'</span><span class="content">78.0.3904.105</span><span class="delimiter">'</span></span>  <i class="conum" data-value="6"></i><b>(6)</b>
    geckodriver <span class="string"><span class="delimiter">'</span><span class="content">0.26.0</span><span class="delimiter">'</span></span> <i class="conum" data-value="7"></i><b>(7)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Apply the <a href="https://github.com/energizedwork/webdriver-binaries-gradle-plugin">Webdriver binaries Gradle Plugin</a>. A Gradle plugin that downloads WebDriver binaries specific to the operating system the build runs on. The plugin also as configures various parts of the build to use the downloaded binaries.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Include a <code>testCompile</code> dependency to the Geb Grails plugin which has a transitive dependency to <code>geb-spock</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Adds the necessary selenium dependencies to use Chrome</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Adds the necessary selenium dependencies to use Firefox</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Geb is built on top of WebDriver. You need these <code>testCompile</code> dependencies.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Configures the <a href="http://chromedriver.chromium.org">ChromeDriver</a> version to be used by the Webdriver binaries Gradle Plugin.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Configures the <a href="https://github.com/mozilla/geckodriver/releases">GeckoDriver</a> version (e.g. Firefox) to be used by the Webdriver binaries Gradle Plugin.</td>
</tr>
</table>
</div>


<h2 id="unitTest">3.1 Unit Test</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/unitTest.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The <code>initial</code> application contains a unit test which verifies the default UrlMapping for <code>/</code>.</p>
</div>
<div class="listingblock">
<div class="title">src/test/groovy/example/grails/UrlMappingsSpec.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.grails

<span class="keyword">import</span> <span class="include">grails.testing.web.UrlMappingsUnitTest</span>
<span class="keyword">import</span> <span class="include">spock.lang.Specification</span>

<span class="type">class</span> <span class="class">UrlMappingsSpec</span> <span class="directive">extends</span> Specification <span class="directive">implements</span> UrlMappingsUnitTest&lt;UrlMappings&gt; {

    <span class="type">void</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">test forward mappings</span><span class="delimiter">&quot;</span></span>() {
        <span class="key">expect</span>:
        verifyForwardUrlMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>, <span class="key">view</span>: <span class="string"><span class="delimiter">'</span><span class="content">index</span><span class="delimiter">'</span></span>)
    }
}</code></pre>
</div>
</div>


<h2 id="integrationTest">3.2 Integration Test</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/integrationTest.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The <code>initial</code> application contains a functional test which uses Geb to verify that the Home Page
displays the sentence <code>Welcome to Grails</code>.</p>
</div>
<div class="listingblock">
<div class="title">src/integration-test/groovy/example/grails/DefaultHomePageSpec.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> example.grails

<span class="keyword">import</span> <span class="include">geb.spock.GebSpec</span>
<span class="keyword">import</span> <span class="include">grails.testing.mixin.integration.Integration</span>
<span class="keyword">import</span> <span class="include">spock.lang.IgnoreIf</span>

<span class="annotation">@IgnoreIf</span>( { !sys[<span class="string"><span class="delimiter">'</span><span class="content">geb.env</span><span class="delimiter">'</span></span>] }) <i class="conum" data-value="1"></i><b>(1)</b>
<span class="annotation">@Integration</span>
<span class="type">class</span> <span class="class">DefaultHomePageSpec</span> <span class="directive">extends</span> GebSpec {

    <span class="keyword">def</span> <span class="string"><span class="delimiter">'</span><span class="content">verifies there is _&lt;h1&gt;_ header with the text _Welcome to Grails_ when we visit the home page.</span><span class="delimiter">'</span></span>() {
        <span class="key">when</span>:
        go <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span>

        <span class="key">then</span>:

        <span class="error">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">h1</span><span class="delimiter">'</span></span>).text() == <span class="string"><span class="delimiter">'</span><span class="content">Welcome to Grails</span><span class="delimiter">'</span></span>

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Ignore test unless system property <code>geb.env</code> is present.</td>
</tr>
</table>
</div>


<h2 id="testLogging">3.3 Verbose Test Output</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/testLogging.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>When running the tests in a continuous integration server is useful to have a more verbose output.</p>
</div>
<div class="paragraph">
<p>Modify <code>build.gradle</code>:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">tasks.withType(Test) {
    testLogging {
        events <span class="string"><span class="delimiter">&quot;</span><span class="content">passed</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">skipped</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">failed</span><span class="delimiter">&quot;</span></span>
        exceptionFormat <span class="string"><span class="delimiter">'</span><span class="content">full</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When we execute the tests we will see output such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./gradlew test
....
...
example.grails.UrlMappingsSpec &gt; test forward mappings PASSED</code></pre>
</div>
</div>


<h2 id="runTests">3.4 Run Tests</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/runTests.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Verify everything executes correctly up to this point.</p>
</div>
<div class="paragraph">
<p><code>./gradlew -Dgeb.env=chromeHeadless check</code>.
To run the tests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./grailsw
grails&gt; test-app
grails&gt; open test-report</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./gradlew check
open build/reports/tests/index.html</code></pre>
</div>
</div>


<h1 id="createGitHubRepo">4 Create GitHub Repo</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/createGitHubRepo.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>We will need to place the Grails application on GitHub so that Travis can access it.</p>
</div>
<div class="paragraph">
<p>Proceed to GitHub and follow the directions to <a href="https://help.github.com/articles/creating-a-new-repository/">create a new repository</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When creating the repo, make it public. Option not to create a LICENSE and .gitignore. We are importing an existing
code base so we want to avoid conflicts.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_add_license">Add License</h3>
<div class="paragraph">
<p>Add the MIT license file.  Travis CI is free with an Open Source License. You can create a file titled <code>LICENSE</code>. with the content:</p>
</div>
<div class="listingblock">
<div class="title">LICENSE</div>
<div class="content">
<pre>MIT License

Copyright (c) 2018 Nirav Assar

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s create an empty <code>travis-build.sh</code>, for which we will use later in the guide.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">&gt; touch travis-build.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>Import the code into the repo on GitHub by executing the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">&gt; git init
&gt; git add .
&gt; git commit -m &quot;first commit&quot;
&gt; git remote add origin &lt;Your repo URL&gt;
&gt; git push -u origin master</code></pre>
</div>
</div>
</div>


<h2 id="grantPermissions">4.1 Grant File Permissions for Execution</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/grantPermissions.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In order for Travis to execute the Grails build, the access permissions, or modes, must be changed for some files.  We will alter modes using
<code>chmod</code> within Git.</p>
</div>
<div class="paragraph">
<p>Grant permissions for <code>gradlew</code> and <code>travis-build.sh</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">&gt; chmod=+x gradlew
&gt; chmod=+x gradlewtravis-build.sh
&gt; git commit -m &quot;chmod a+x gradew and travis-build.sh&quot;
&gt; git push</code></pre>
</div>
</div>


<h1 id="integrateTravis">5 Integrate Travis CI</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/integrateTravis.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Travis CI integrates directly with your GitHub account. Follow the directions on the Travis website for
<a href="https://docs.travis-ci.com/user/getting-started/">Getting Started.</a></p>
</div>
<div class="paragraph">
<p>In short you will need to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use your GitHub account to sign into Travis.</p>
</li>
<li>
<p>Give permission to Travis to access your repositories.</p>
</li>
<li>
<p>Enable the repository with Travis CI.</p>
</li>
<li>
<p>Create a <code>.travis.yml</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The next image shows how to enable the repository with Travis CI:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/travis.png" alt="travis">
</div>
</div>


<h2 id="createTravisConfig">5.1 Create Travis Config File</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/createTravisConfig.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The <code>.travis.yml</code> file tells Travis what to do. It must be located at the top level of your project.  For a Grails project,
note that we have set the <code>language: groovy</code>.  Travis comes with reasonable defaults. If the project has <code>build.gradle</code> in the
repository root, Travis runs <code>gradlew assemble</code> in the <code>install</code> phase, and <code>gradlew check</code> in the <code>test</code> phase.</p>
</div>
<div class="listingblock">
<div class="title"><strong>.travis.yml</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">sudo</span>: <span class="string"><span class="content">false</span></span> <span class="comment"># </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="key">before_cache</span>:
  - <span class="string"><span class="content">rm -f $HOME/.gradle/caches/modules-2/modules-2.lock</span></span>
<span class="key">cache</span>:
  <span class="key">directories</span>:
    - <span class="string"><span class="content">$HOME/.gradle/caches/</span></span>
    - <span class="string"><span class="content">$HOME/.gradle/wrapper/</span></span> <span class="comment"># </span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="key">language</span>: <span class="string"><span class="content">groovy</span></span> <span class="comment"># </span><i class="conum" data-value="3"></i><b>(3)</b>
<span class="key">jdk</span>:
  - <span class="string"><span class="content">oraclejdk8</span></span> <span class="comment"># </span> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Gives the default Ubuntu infrastructure.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This line up to <code>before_cache</code> is caching configuration tells Travis CI explicitly that you want to store and use the Gradle cache and Wrapper for successive invocations of the build. Read <a href="https://guides.gradle.org/executing-gradle-builds-on-travisci/">Executing Gradle builds on travis ci</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Select <code>groovy</code> as the language.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Select the <code>Java</code> jdk8.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Commit the change to Git push them to the remote repository.  Upon the push, go to <a href="https://travis-ci.com/" class="bare">https://travis-ci.com/</a> and view the build running.
Once the build is complete, restart the build to demonstrate that Travis will use the cache for dependencies.</p>
</div>
<div class="paragraph">
<p>Gradle <code>check</code> task executes both <code>test</code> and <code>integrationTest</code> tasks which in turn execute Grails Unit and Integration/Functional Test.
However, the feature method <code>DefaultHomePageSpec</code> is ignored if we do not specify the system property <code>geb.env</code>.</p>
</div>


<h2 id="delegateToScript">5.2 Delegate to Script File</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/delegateToScript.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In order to be more expressive with the build, we can delegate to a script file.  In this scenario, Travis will execute a specified file
and skip the defaults.  Below is a <code>.travis.yml</code> which delegates to a .<code>sh</code> file.</p>
</div>
<div class="listingblock">
<div class="title"><strong>.travis.yml</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yml"><span class="key">sudo</span>: <span class="string"><span class="content">true</span></span>
<span class="key">addons</span>:
  <span class="key">chrome</span>: <span class="string"><span class="content">stable</span></span> <span class="comment"># </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="key">before_cache</span>:
  - <span class="string"><span class="content">rm -f $HOME/.gradle/caches/modules-2/modules-2.lock</span></span>
<span class="key">cache</span>:
  <span class="key">directories</span>:
    - <span class="string"><span class="content">$HOME/.gradle/caches/</span></span>
    - <span class="string"><span class="content">$HOME/.gradle/wrapper/</span></span>
<span class="key">language</span>: <span class="string"><span class="content">groovy</span></span>
<span class="key">install</span>: <span class="comment"># </span><i class="conum" data-value="2"></i><b>(2)</b>
  - <span class="string"><span class="content">true</span></span>
<span class="key">jdk</span>:
  - <span class="string"><span class="content">openjdk8</span></span>
<span class="key">script</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./travis-build.sh</span><span class="delimiter">&quot;</span></span> <span class="comment"># </span> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <a href="https://docs.travis-ci.com/user/chrome">Google Chrome addon</a> allows Travis CI builds to install Google Chrome at run time. To use the addon you need to be running builds on either the Trusty build environment or the OS X build environment.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Skip installation step entirely.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Delegate to a script.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The script below runs both unit and integration/functional tests. The Geb test is run using Chrome in headless mode.</p>
</div>
<div class="listingblock">
<div class="title"><strong>travis-build.sh</strong></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">#!/bin/bash

EXIT_STATUS=0

echo &quot;Running tests with geb.env chromeHeadless&quot;
./gradlew -Dgeb.env=chromeHeadless check || EXIT_STATUS=$? # <i class="conum" data-value="1"></i><b>(1)</b>

exit $EXIT_STATUS</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Execute <code>./gradlew -Dgeb.env=chromeHeadless check</code> command.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Commit the change to Git push them to the remote repository. Upon the push, go to <a href="https://travis-ci.com/" class="bare">https://travis-ci.com/</a> and view the build running.</p>
</div>


<h1 id="helpWithGrails">6 Help with Grails</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-on-travis-basics/edit/master/src/main/docs/guide/helpWithGrails.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<h3 style="color: #333; margin-bottom:25px;"><a href="https://objectcomputing.com/" target="_blank">Object Computing, Inc.</a> (OCI) sponsored the creation of this Guide. A variety of consulting and support services are available.</h3>

<!-- BEGIN HubSpot Consultation Form -->

<!--[if lte IE 8]>
<script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2-legacy.js"></script>
<![endif]-->
<script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/v2.js"></script>
<script>
  hbspt.forms.create({
	portalId: "4547412",
	formId: "f8bc9b16-d5f6-4226-a24e-da0eb8b73363"
});
</script>

<!-- END HubSpot Consultation Form -->

<h3 style="color: #333;">OCI is Home to Grails</h3>

<p><a href="https://objectcomputing.com/products/2gm-team" target="_blank">Meet the Team</a></p>

</article></div><footer>
  <div class='content'>
    <div class='ocihometograils'>
      <span>Sponsored by</span>
      <a href='https://objectcomputing.com/products/grails/'><img class='' src='/images/oci_home_to_grails.svg' alt='Object Computing - Home to Grails' width='300px' /></a>
    </div>
    <nav class='socialmedianav'><ul>
  <li>
    <a href='https://slack.grails.org'><img class='' src='/images/slack.svg' alt='Slack Icon' /></a>
  </li>
  <li>
    <a href='https://www.youtube.com/watch?v=XnRNfDGkBVg&amp;list=PLI74De5M9T73uH3WilDCePP2qfSDpMaGu'><img class='' src='/images/youtube.svg' alt='Youtube Icon' /></a>
  </li>
  <li>
    <a href='https://www.linkedin.com/groups/39757'><img class='' src='/images/linkedin.svg' alt='LinkedIn Icon' /></a>
  </li>
  <li>
    <a href='https://github.com/grails/'><img class='' src='/images/github.svg' alt='Github Icon' /></a>
  </li>
  <li>
    <a href='https://twitter.com/grailsframework'><img class='' src='/images/twitter.svg' alt='Twitter Icon' /></a>
  </li>
</ul></nav>
    <nav class='partnersnav'><ul>
  <li>Grails' repositories are hosted by
    <a href='https://repo.grails.org/'>Artifactory</a>
  </li>
  <li>Website hosting provided by
    <a href='https://aws.amazon.com/'>AWS</a>
  </li>
  <li>JetBrains supports Grails with its 
    <a href='https://www.jetbrains.com/idea/'>IntelliJ IDEA IDE</a>
  </li>
  <li>YourKit supports Grails with its 
    <a href='https://www.yourkit.com/java/profiler/index.jsp'>Java Profiler</a>
  </li>
  <li>Grails is Open Source
    <a href='http://www.apache.org/licenses/LICENSE-2.0.html'>Apache 2 License</a>
  </li>
  <li>
    <a href='https://grails.org/buildstatus.html'>Build Status</a>
  </li>
</ul></nav>
  </div>
</footer><div>
  <script type='text/javascript'>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-82213539-2', 'auto');
              ga('send', 'pageview');
</script>
  <script type='text/javascript'>
adroll_adv_id = "HBWJH4CQCJGS5DJRSB4Z4D";
adroll_pix_id = "IVEQYFOZXZAPZMDVQH7BFE";
/* OPTIONAL: provide email to improve user identification */
/* adroll_email = "username@example.com"; */
(function () {
    var _onload = function(){
        if (document.readyState && !/loaded|complete/.test(document.readyState)){setTimeout(_onload, 10);return}
        if (!window.__adroll_loaded){__adroll_loaded=true;setTimeout(_onload, 50);return}
        var scr = document.createElement("script");
        var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
        scr.setAttribute('async', 'true');
        scr.type = "text/javascript";
        scr.src = host + "/j/roundtrip.js";
        ((document.getElementsByTagName('head') || [null])[0] ||
            document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
    };
    if (window.addEventListener) {window.addEventListener('load', _onload, false);}
    else {window.attachEvent('onload', _onload)}
}());            
</script>
</div></body>
</html>
