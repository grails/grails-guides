<!DOCTYPE html>
<html>
  <head>
    <meta name='google-site-verification' content='REYQ1_I6HGowAE7LOLVqfQbnKaB4IfFpMlGzMbJj55Q' />
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <link rel='icon' href='../img/favicon.ico' />
    <link rel='mask-icon' href='/../img/grails-pinned-icon.svg' color='feb672' />
    <meta charset='UTF-8' />
    <title>Building a React App | Grails Guides | Grails Framework</title>
    <meta name='description' content='Building a React App. Use the React 1.x profile to create a Grails app with React views' />
    <link rel='stylesheet' href='../css/main.css' />
    <link rel='stylesheet' href='../css/screen.css' />
    <script src='https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js'></script>
  </head>
  <body class='guide'><header class='mainheader'>
  <div class='content'>
    <a href='https://grails.org/index.html'><img class='grailslogo' src='/images/grails_logo.svg' alt='Grails Logo' /></a>
    <a href='javascript:show(&apos;topmenus&apos;, &apos;showNavigationLink&apos;)' id='showNavigationLink' class='mobile align-center'>Show Navigation</a>
    <div id='topmenus'>
      <nav class='secondarymenu' id='secondarymenu'><ul>
  <li>
    <a href='https://grails.org/learning.html'>Learning</a>
  </li>
  <li>
    <a href='https://grails.org/community.html'>Community</a>
  </li>
  <li>
    <a href='https://grails.org/search.html'>Search</a>
  </li>
</ul></nav>
      <nav class='mainmenu' id='mainmenu'><ul>
  <li>
    <a href='https://grails.org/documentation.html'>Documentation</a>
  </li>
  <li>
    <a href='https://grails.org/download.html'>Download</a>
  </li>
  <li>
    <a href='http://plugins.grails.org'>Plugins</a>
  </li>
  <li>
    <a href='https://guides.grails.org/index.html'>Guides</a>
  </li>
  <li>
    <a href='https://grails.org/faq.html'>FAQ</a>
  </li>
  <li>
    <a href='https://grails.org/support.html'>Support</a>
  </li>
</ul></nav>
    </div>
  </div>
</header><div class='fullwidth'><article class="guide">
    <aside>
        <a href="https://travis-ci.org/grails-guides/building-a-react-app"><img src="https://travis-ci.org/grails-guides/building-a-react-app.svg?branch=master"></a>

        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/grails-guides/building-a-react-app&quot;"><img height="15" src="../img/github_white.svg" alt="Github"/><span>&nbsp;Get the Code</span></button>


        <ul class="githublinks">
            <li><button type="button" class="btn btn-default" href="#" onclick="document.getElementById('github-url').value='git@github.com:grails-guides/building-a-react-app.git'" class="codeButton">SSH</button></li>
            <li><button type="button" class="btn btn-default" onclick="document.getElementById('github-url').value='https://github.com/grails-guides/building-a-react-app.git'" class="codeButton">HTTPS</button></li>
        </ul>
        <div class="input-group">
            <!-- Target -->
            <input id="github-url" value="git@github.com:grails-guides/building-a-react-app.git" type="text" />
            <!-- Trigger -->
            <button type="button" class="clippy btn btn-default" type="button" data-clipboard-target="#github-url">
                <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
            </button>
        </div>
        <script>var clipboard = new Clipboard('.clippy');</script>
        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/grails-guides/building-a-react-app/archive/master.zip&quot;">Download ZIP</button>
        
        <div id="table-of-content">
            <h3>Table of Contents</h3>
            
            <div class="toc-item" style="margin-left:0px"><a href="#training"><strong>1</strong><span>Grails Training</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#gettingStarted"><strong>2</strong><span>Getting Started</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#requirements"><strong>2.1</strong><span>What you will need</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#howto"><strong>2.2</strong><span>How to complete the guide</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#writingTheApp"><strong>3</strong><span>Writing the Application</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#runningTheApp"><strong>4</strong><span>Running the Application</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#customizingApi"><strong>4.1</strong><span>Customizing the API</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#writingReactComponents"><strong>5</strong><span>Writing our React components</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#vehicles"><strong>5.1</strong><span>Writing the Vehicles component</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#garage"><strong>5.2</strong><span>Writing the Garage app</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#rendering"><strong>5.3</strong><span>Render the app</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#fetch"><strong>5.4</strong><span>Fetching data from the API</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#post"><strong>5.5</strong><span>Posting data to the API</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#nextSteps"><strong>6</strong><span>Next Steps</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#helpWithGrails"><strong>7</strong><span>Do you need help with Grails?</span></a></div>
            
            <div style="clear:both" ></div>
        </div>
        
    </aside>
    <header>
        <h1>Building a React App</h1>
        <p>Use the React 1.x profile to create a Grails app with React views</p>
        <p><strong>Authors:</strong> Zachary Klein</p>
        <p><strong>Grails Version:</strong> 3.3.5</p>
    </header>
    

<h1 id="training">1 Grails Training</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/training.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p><strong>Grails Training</strong> - Developed and delivered by the folks who created and actively maintain the Grails framework!.</p>
</div>
<div id="ocitraining"></div>
<script type="text/javascript">
var getJSON = function(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'json';
    xhr.onload = function() {
      var status = xhr.status;
      if (status == 200) {
        callback(null, xhr.response);
      } else {
        callback(status);
      }
    };
    xhr.send();
};
getJSON('https://oci-training.cfapps.io/training', function(err, data) {
  var msg = '';
  if (err != null) {
      msg = 'Something went wrong while retrieving OCI training offerings';

  } else {
      if ( data.length == 0 ) {
         msg = '<p><b>Nothing scheduled at the moment - please check back again soon!</b></p>.';

      } else {
        msg += '<table>';
        msg += '<thead>';
        msg += '<tr><th>Course</th><th>Date(s)</th><th>Instructor(s)</th><th>Hour(s)</th></tr>';
        msg += '</thead>';
        msg += '<tbody>';

        var hrefs = new Array();
        for (var i = 0; i < data.length; i++) {
            var href = data[i].enrollmentLink;
            if (hrefs.indexOf(href) == -1) {
                msg += '<tr><td><a href="'+ href + '">'+ data[i].course + '</a></td><td>'+ data[i].dates + '</td><td>'+ data[i].instructors + '</td><td>'+ data[i].hours + '</td></tr>';
                hrefs.push(href);
            }

        }
        msg += '</tbody>';
        msg += '</table>';
      }
  }
  var ociTraining = document.getElementById("ocitraining");
  ociTraining.innerHTML = msg;
});
</script>


<h1 id="gettingStarted">2 Getting Started</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/gettingStarted.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In this guide you are going to create Grails app using React as a view layer. You will be using the 1.0.2 version of the React profile (single project, using Webpack and the Asset Pipeline).</p>
</div>
<div class="paragraph">
<p>A few changes were made to the initial project (compared to a default Grails project using the 1.0.2 version of the React profile). A patch file containing the changes is provided in the <a href="https://github.com/grails-guides/building-a-react-app/blob/master/initial.patch">guide repo</a>.</p>
</div>


<h2 id="requirements">2.1 What you will need</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/requirements.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To complete this guide, you will need the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some time on your hands</p>
</li>
<li>
<p>A decent text editor or IDE</p>
</li>
<li>
<p>JDK 1.7 or greater installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
</ul>
</div>


<h2 id="howto">2.2 How to complete the guide</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/howto.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To get started do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/grails-guides/building-a-react-app/archive/master.zip">Download</a> and unzip the source</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clone the <a href="https://git-scm.com/">Git</a> repository:<br>
<code>git clone <a href="https://github.com/grails-guides/building-a-react-app.git" class="bare">https://github.com/grails-guides/building-a-react-app.git</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Grails guides repositories contain two folders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>initial</code>  Initial project. Often a simple Grails app with some additional code to give you a head-start.</p>
</li>
<li>
<p><code>complete</code> A completed example. It is the result of working through the steps presented by the guide and applying those changes to the <code>initial</code> folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To complete the guide, go to the <code>initial</code> folder</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cd</code> into <code>grails-guides/building-a-react-app/initial</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and follow the instructions in the next sections.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can go right to the <strong>completed example</strong> if you <code>cd</code> into <code>grails-guides/building-a-react-app/complete</code>
</td>
</tr>
</table>
</div>


<h1 id="writingTheApp">3 Writing the Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/writingTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The React profile includes some default React sample code. Feel free to run the app as is if you want to see the sample in action.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start by creating our domain model for the application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ grails create-domain-class demo.Vehicle
$ grails create-domain-class demo.Driver
$ grails create-domain-class demo.Make
$ grails create-domain-class demo.Model</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s edit our domain class under <code>grails-app/domain/demo/</code>. We&#8217;ll add some properties and the <code>@Resource</code> annotation.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/grails-app/domain/demo/Vehicle.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.rest.Resource</span>

<span class="annotation">@Resource</span>(uri = <span class="string"><span class="delimiter">'</span><span class="content">/vehicle</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Vehicle</span> {

    <span class="predefined-type">String</span> name

    Make make
    Model model

    <span class="directive">static</span> belongsTo = [<span class="key">driver</span>: <span class="predefined-type">Driver</span>]

    <span class="directive">static</span> constraints = {
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">grails-app/grails-app/domain/demo/Driver.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.rest.Resource</span>

<span class="annotation">@Resource</span>(uri = <span class="string"><span class="delimiter">'</span><span class="content">/driver</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Driver</span> {

    <span class="predefined-type">String</span> name

    <span class="directive">static</span> hasMany = [ <span class="key">vehicles</span>: Vehicle ]

    <span class="directive">static</span> constraints = {
        vehicles <span class="key">nullable</span>: <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">grails-app/grails-app/domain/demo/Make.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.rest.Resource</span>

<span class="annotation">@Resource</span>(uri = <span class="string"><span class="delimiter">'</span><span class="content">/make</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Make</span> {

    <span class="predefined-type">String</span> name

    <span class="directive">static</span> constraints = {
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">grails-app/grails-app/domain/demo/Model.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.rest.Resource</span>

<span class="annotation">@Resource</span>(uri = <span class="string"><span class="delimiter">'</span><span class="content">/model</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Model</span> {

    <span class="predefined-type">String</span> name

    <span class="directive">static</span> constraints = {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since we&#8217;ve added the <code>@Resource</code> annotation to our domain classes, Grails will generate RESTful URL mappings for each of them. Let&#8217;s preload some data:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/init/demo/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">demo.Driver</span>
<span class="keyword">import</span> <span class="include">demo.Make</span>
<span class="keyword">import</span> <span class="include">demo.Model</span>
<span class="keyword">import</span> <span class="include">demo.Vehicle</span>

<span class="type">class</span> <span class="class">BootStrap</span> {

    <span class="keyword">def</span> init = { servletContext -&gt;
        log.info <span class="string"><span class="delimiter">&quot;</span><span class="content">Loading database...</span><span class="delimiter">&quot;</span></span>
        <span class="keyword">def</span> driver1 = <span class="keyword">new</span> <span class="predefined-type">Driver</span>(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Susan</span><span class="delimiter">&quot;</span></span>).save()
        <span class="keyword">def</span> driver2 = <span class="keyword">new</span> <span class="predefined-type">Driver</span>(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Pedro</span><span class="delimiter">&quot;</span></span>).save()

        <span class="keyword">def</span> nissan = <span class="keyword">new</span> Make(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Nissan</span><span class="delimiter">&quot;</span></span>).save()
        <span class="keyword">def</span> ford = <span class="keyword">new</span> Make(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Ford</span><span class="delimiter">&quot;</span></span>).save()

        <span class="keyword">def</span> titan = <span class="keyword">new</span> Model(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Titan</span><span class="delimiter">&quot;</span></span>).save()
        <span class="keyword">def</span> leaf = <span class="keyword">new</span> Model(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Leaf</span><span class="delimiter">&quot;</span></span>).save()
        <span class="keyword">def</span> windstar = <span class="keyword">new</span> Model(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Windstar</span><span class="delimiter">&quot;</span></span>).save()

        <span class="keyword">new</span> Vehicle(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Pickup</span><span class="delimiter">&quot;</span></span>, <span class="key">driver</span>: driver1, <span class="key">make</span>: nissan, <span class="key">model</span>: titan).save()
        <span class="keyword">new</span> Vehicle(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Economy</span><span class="delimiter">&quot;</span></span>, <span class="key">driver</span>: driver1, <span class="key">make</span>: nissan, <span class="key">model</span>: leaf).save()
        <span class="keyword">new</span> Vehicle(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Minivan</span><span class="delimiter">&quot;</span></span>, <span class="key">driver</span>: driver2, <span class="key">make</span>: ford, <span class="key">model</span>: windstar).save()

    }
    <span class="keyword">def</span> destroy = {
    }
}</code></pre>
</div>
</div>


<h1 id="runningTheApp">4 Running the Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/runningTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Now, if we run our app, we can try out the RESTful API that Grails has generated for us. Start up the app using a local installation of Grails 3.2.4 or one of the provided wrappers: <code>./gradlew bootRun</code> or <code>./grailsw run-app</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ ./grailsw run-app</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can exercise the API using cURL or another API tool.</p>
</div>
<div class="paragraph">
<p>Make a <code>GET</code> request to <code>/vehicle</code> to get a list of Vehicles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ curl -X &quot;GET&quot; &quot;http://localhost:8080/vehicle&quot;

HTTP/1.1 200
X-Application-Context: application:development
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Fri, 06 Jan 2017 19:28:49 GMT
Connection: close

[{&quot;id&quot;:1,&quot;driver&quot;:{&quot;id&quot;:1},&quot;make&quot;:{&quot;id&quot;:1},&quot;model&quot;:{&quot;id&quot;:1},&quot;name&quot;:&quot;Pickup&quot;},
{&quot;id&quot;:2,&quot;driver&quot;:{&quot;id&quot;:1},&quot;make&quot;:{&quot;id&quot;:1},&quot;model&quot;:{&quot;id&quot;:2},&quot;name&quot;:&quot;Economy&quot;},
{&quot;id&quot;:3,&quot;driver&quot;:{&quot;id&quot;:2},&quot;make&quot;:{&quot;id&quot;:2},&quot;model&quot;:{&quot;id&quot;:3},&quot;name&quot;:&quot;Minivan&quot;}]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make a <code>GET</code> request to <code>/driver/1</code> to get a particular Driver instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ curl -X &quot;GET&quot; &quot;http://localhost:8080/driver/1&quot;

HTTP/1.1 200
X-Application-Context: application:development
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Fri, 06 Jan 2017 22:10:33 GMT
Connection: close

{&quot;id&quot;:1,&quot;name&quot;:&quot;Susan&quot;,&quot;vehicle&quot;:[{&quot;id&quot;:2},{&quot;id&quot;:1}]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make a <code>POST</code> request to <code>/driver</code> to create a new Driver instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ curl -X &quot;POST&quot; &quot;http://localhost:8080/driver&quot; \
      -H &quot;Content-Type: application/json; charset=utf-8&quot; \
      -d '{&quot;name&quot;:&quot;Edward&quot;}'

HTTP/1.1 201
X-Application-Context: application:development
Location: http://localhost:8080/driver/3
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Fri, 06 Jan 2017 21:55:59 GMT
Connection: close

{&quot;id&quot;:3,&quot;name&quot;:&quot;Edward&quot;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make a <code>PUT</code> request to <code>/vehicle</code> to update a Vehicle instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ curl -X &quot;PUT&quot; &quot;http://localhost:8080/vehicle/1&quot; \
       -H &quot;Content-Type: application/json; charset=utf-8&quot; \
       -d '{&quot;name&quot;:&quot;Truck&quot;,&quot;id&quot;:1}'

HTTP/1.1 200
X-Application-Context: application:development
Location: http://localhost:8080/vehicle/1
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Fri, 06 Jan 2017 22:12:31 GMT
Connection: close

{&quot;id&quot;:1,&quot;driver&quot;:{&quot;id&quot;:1},&quot;make&quot;:{&quot;id&quot;:1},&quot;model&quot;:{&quot;id&quot;:1},&quot;name&quot;:&quot;Truck&quot;}</code></pre>
</div>
</div>


<h2 id="customizingApi">4.1 Customizing the API</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/customizingApi.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>By default, the RESTful URLs generated by Grails provide only the IDs of associated objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">HTTP/1.1 200
X-Application-Context: application:development
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Fri, 06 Jan 2017 23:55:33 GMT
Connection: close

{&quot;id&quot;:1,&quot;name&quot;:&quot;Pickup&quot;,&quot;make&quot;:{&quot;id&quot;:1},&quot;driver&quot;:{&quot;id&quot;:1}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is sufficient for many usages, but we&#8217;ll need to get a bit more data for our React component in a moment. This is an excellent place for <a href="http://views.grails.org/latest/">JSON Views</a>. Let&#8217;s create a new JSON view to render our Vehicle list:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mkdir grails-app/views/vehicle/</code></pre>
</div>
</div>
<div class="paragraph">
<p>By convention, any JSON views in the corresponding view directory for a restful controller (like those generated by <code>@Resource</code>) will be used in lieu of the default JSON representation. Now we can customize our JSON output for each Vehicle by creating a new JSON template for Vehicle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ vim grails-app/views/vehicle/_vehicle.gson</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit the file to include the following:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/vehicle/_vehicle.gson</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">demo.Vehicle</span>

model {
    Vehicle vehicle
}
json {
    id vehicle.id

    name vehicle.name

    make <span class="key">name</span>: vehicle.make.name,
        <span class="key">id</span>: vehicle.make.id

    model <span class="key">name</span>: vehicle.model.name,
            <span class="key">id</span>: vehicle.model.id

    driver <span class="key">name</span>: vehicle.driver.name,
        <span class="key">id</span>: vehicle.driver.id
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now when we access our API, we&#8217;ll see the <code>name</code> and <code>id</code> of each <code>make</code>, <code>model</code>, and <code>driver</code> are included.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">HTTP/1.1 200
X-Application-Context: application:development
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Sat, 07 Jan 2017 00:24:18 GMT
Connection: close

{&quot;id&quot;:1,&quot;name&quot;:&quot;Pickup&quot;,&quot;make&quot;:{&quot;name&quot;:&quot;Nissan&quot;,&quot;id&quot;:1},&quot;model&quot;:{&quot;name&quot;:&quot;Titan&quot;,&quot;id&quot;:1},&quot;driver&quot;:{&quot;name&quot;:&quot;Susan&quot;,&quot;id&quot;:1}}</code></pre>
</div>
</div>


<h1 id="writingReactComponents">5 Writing our React components</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/writingReactComponents.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Now we&#8217;re ready to start creating our React components to view and interact with our API. We&#8217;ll just handle listing Vehicles and creating new instances for now.</p>
</div>


<h2 id="vehicles">5.1 Writing the Vehicles component</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/vehicles.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Let&#8217;s start with a <code>Vehicles</code> component, which will render a table of our Vehicle instances.</p>
</div>
<div class="paragraph">
<p>Create a new JavaScript file under <code>src/main/webapp/app/</code> called <code>Vehicles.js</code>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s our <code>Vehicles</code> component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> React from <span class="string"><span class="delimiter">'</span><span class="content">react</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> {Table} from <span class="string"><span class="delimiter">'</span><span class="content">react-bootstrap</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> {array} from <span class="string"><span class="delimiter">'</span><span class="content">prop-types</span><span class="delimiter">'</span></span>;

<span class="reserved">class</span> Vehicles <span class="reserved">extends</span> React.Component {

  render() {
    <span class="keyword">function</span> <span class="function">renderVehicleRow</span>(vehicle) {

      <span class="keyword">return</span> (&lt;tr key={vehicle.id}&gt;
        <span class="tag">&lt;td&gt;</span>{vehicle.id}<span class="tag">&lt;/td&gt;</span>
        <span class="tag">&lt;td&gt;</span>{vehicle.name}<span class="tag">&lt;/td&gt;</span>
        <span class="tag">&lt;td&gt;</span>{vehicle.make.name}<span class="tag">&lt;/td&gt;</span>
        <span class="tag">&lt;td&gt;</span>{vehicle.model.name}<span class="tag">&lt;/td&gt;</span>
        <span class="tag">&lt;td&gt;</span>{vehicle.driver.name}<span class="tag">&lt;/td&gt;</span>
      &lt;<span class="regexp"><span class="delimiter">/</span><span class="content">tr&gt;);
    }


    return &lt;div&gt;
      &lt;Table striped bordered condensed hover&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;ID&lt;</span><span class="delimiter">/</span></span>th&gt;
          <span class="tag">&lt;th&gt;</span>Name<span class="tag">&lt;/th&gt;</span>
          <span class="tag">&lt;th&gt;</span>Make<span class="tag">&lt;/th&gt;</span>
          <span class="tag">&lt;th&gt;</span>Model<span class="tag">&lt;/th&gt;</span>
          <span class="tag">&lt;th&gt;</span>Driver<span class="tag">&lt;/th&gt;</span>
        &lt;<span class="regexp"><span class="delimiter">/</span><span class="content">tr&gt;
        &lt;</span><span class="delimiter">/</span></span>thead&gt;
        <span class="tag">&lt;tbody&gt;</span>

        {this.props.vehicles.map(renderVehicleRow)}

        <span class="tag">&lt;/tbody&gt;</span>
      &lt;<span class="regexp"><span class="delimiter">/</span><span class="content">Table&gt;
    &lt;</span><span class="delimiter">/</span></span>div&gt;;
  }
}

Vehicles.propTypes = {
  <span class="key">vehicles</span>: array
};

<span class="reserved">export</span> <span class="keyword">default</span> Vehicles;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that in the <code>renderVehicleRow</code> function we are accessing the customized JSON representation of our Vehicle instances, so we can use <code>vehicle.make.name</code>, for example.</p>
</div>
<div class="paragraph">
<p>The React profile includes <a href="http://react-bootstrap.github.io">React-Bootstrap</a> by default, so we&#8217;re using the Bootstrap <code>Table</code> component to streamline our code.</p>
</div>


<h2 id="garage">5.2 Writing the Garage app</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/garage.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Now we need to give our <code>Vehicles</code> component access to data from our API. We could have done this from within the <code>Vehicles</code> component, but a more flexible option is to create a "container" component which will obtain the data from the API and pass it down to the "presentational" component (<code>Vehicles</code>, in this case) via props.</p>
</div>
<div class="paragraph">
<p>With this separated approach, we can expand our app in the future to make additional API calls (and even render different components, perhaps a <code>Drivers</code> table for example), without having to clutter up our <code>Vehicles</code> component. Let&#8217;s call our "container" component <code>Garage</code>.</p>
</div>
<div class="paragraph">
<p>Create a new JavaScript file under <code>src/main/webapp/app/</code> called <code>Garage.js</code>.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s our <code>Garage</code> component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> React from <span class="string"><span class="delimiter">'</span><span class="content">react</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> ReactDOM from <span class="string"><span class="delimiter">'</span><span class="content">react-dom</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> Vehicles from <span class="string"><span class="delimiter">'</span><span class="content">./Vehicles</span><span class="delimiter">'</span></span>;

<span class="reserved">class</span> Garage <span class="reserved">extends</span> React.Component {

  constructor() {
    <span class="reserved">super</span>();

    <span class="local-variable">this</span>.state = {
      <span class="key">vehicles</span>: [{<span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>:<span class="integer">1</span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Pickup</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">make</span><span class="delimiter">&quot;</span></span>:{<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Nissan</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>:<span class="integer">1</span>},<span class="key"><span class="delimiter">&quot;</span><span class="content">model</span><span class="delimiter">&quot;</span></span>:{<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Titan</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>:<span class="integer">1</span>},<span class="key"><span class="delimiter">&quot;</span><span class="content">driver</span><span class="delimiter">&quot;</span></span>:{<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Susan</span><span class="delimiter">&quot;</span></span>,<span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>:<span class="integer">1</span>}}],
    }
  }

  render() {
    const {vehicles} = <span class="local-variable">this</span>.state;

    <span class="keyword">return</span> <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;Vehicles</span> <span class="attribute-name">vehicles</span>=<span class="error">{</span><span class="attribute-value">vehicles</span><span class="error">}</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/div&gt;</span>;
  }
}

ReactDOM.render(&lt;Garage /&gt;, document.getElementById(<span class="string"><span class="delimiter">'</span><span class="content">garage</span><span class="delimiter">'</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Garage</code> component uses a <code>state</code> object, which is available to all React components but is optional. We did not need <code>state</code> in our <code>Vehicles</code> component because it receives all it&#8217;s data via the <code>vehicles</code> prop. A good practice when writing React is to centralize your state in a few components (even a single one) and pass down peices of relevant data to the child components.</p>
</div>
<div class="paragraph">
<p>Notice that we are hard-coding a single JSON object in the <code>vehicles</code> collection of our <code>state</code> - that&#8217;s because we haven&#8217;t set up our API calls yet - we&#8217;ll get to that part in a couple sections.</p>
</div>
<div class="paragraph">
<p>The <code>Garage</code> component includes a call to <code>ReactDOM.render</code> in order to render the components onto the page. Now we will create a new page from which to load our React components.</p>
</div>


<h2 id="rendering">5.3 Render the app</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/rendering.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The React 1.0.2 profile relies on Webpack to bundle React components into browser-ready JavaScript bundles, which can then be loaded via the Grails Asset Pipeline. The default application includes a single "index" bundle which is rendered on the index page. Let&#8217;s set up a new bundle for our <code>Garage</code> app.</p>
</div>
<div class="paragraph">
<p>In <code>webpack.config.js</code>, edit the <code>entry</code> section and add a line to load our <code>Garage.js</code> file, as seen below:</p>
</div>
<div class="listingblock">
<div class="title">webpack.config.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> path = require(<span class="string"><span class="delimiter">'</span><span class="content">path</span><span class="delimiter">'</span></span>);

module.exports = {
  <span class="key">entry</span>: {
    <span class="key">index</span>: <span class="string"><span class="delimiter">'</span><span class="content">./src/main/webapp/index.js</span><span class="delimiter">'</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="key">garage</span>: <span class="string"><span class="delimiter">'</span><span class="content">./src/main/webapp/app/Garage.js</span><span class="delimiter">'</span></span> <i class="conum" data-value="2"></i><b>(2)</b>
  },
<span class="comment">//...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add the path to <code>Garage.js</code> as the <code>garage</code> entry point</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Don&#8217;t forget the comma!</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This will cause Webpack to bundle two different React apps, "index" and "garage". We also need to configure Webpack to output separate bundles for each React app, so we can load them on different pages of our Grails app.</p>
</div>
<div class="paragraph">
<p>In <code>webpack.config.js</code>, edit the <code>output</code> section and change the <code>filename</code> line as shown below:</p>
</div>
<div class="listingblock">
<div class="title">webpack.config.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">//...</span>
output: {
  <span class="key">path</span>: path.join(__dirname, <span class="string"><span class="delimiter">'</span><span class="content">grails-app/assets/javascripts</span><span class="delimiter">'</span></span>),
  <span class="key">publicPath</span>: <span class="string"><span class="delimiter">'</span><span class="content">/assets/</span><span class="delimiter">'</span></span>,
  <span class="key">filename</span>: <span class="string"><span class="delimiter">'</span><span class="content">bundle-[name].js</span><span class="delimiter">'</span></span>
},
<span class="comment">//...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add <code>-[name]</code> to the filename property</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now when we start up our Grails app (or run <code>./gradlew webpack</code>), Webpack will generate two bundles, one called <code>bundle-index.js</code> and one called <code>bundle-Garage.js</code>. We can load these bundles on our page using the Grails Asset Pipeline tags.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since we changed the filename of the bundle, we&#8217;ll need to quickly update our original <code>index.gsp</code> page to use the new name.</p>
</div>
<div class="paragraph">
<p>Edit <code>grails-app/views/index.gsp</code>, line 66:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">app</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;asset:javascript</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-index.js</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Change "bundle.js" to "bundle-index.js"</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we are finally ready to create a home page for our <code>Garage</code> app. Create a new Grails controller using a local Grails installation or <code>./grailsw</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./grailsw create-controller demo.GarageController</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure that <code>GarageController</code> contains a single <code>index</code> action.</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/demo/GarageController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="type">class</span> <span class="class">GarageController</span> {
    <span class="keyword">def</span> <span class="function">index</span>() { }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, create a simple <code>index.gsp</code> page under <code>grails-app/views/garage</code>:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/views/garage/index.gsp</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">content</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">main</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;title&gt;</span>Garage<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;asset:link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">icon</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">favicon.ico</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">image/x-ico</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>

<span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">role</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">main</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;section</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">row colset-2-its</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">garage</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;asset:javascript</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bundle-garage.js</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/section&gt;</span>
<span class="tag">&lt;/div&gt;</span>

<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Restart the app, and browse to <code><a href="http://localhost:8080/garage" class="bare">http://localhost:8080/garage</a></code>. You should see our new React app loaded on the page, with a single hard-coded row of data.</p>
</div>


<h2 id="fetch">5.4 Fetching data from the API</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/fetch.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Now that our <code>Garage</code> component is set up and rendering the <code>Vehicles</code> table on our page, we can finally hook up our API to load data into our React views. We&#8217;ll use the <code>fetch</code> API for this purpose.</p>
</div>
<div class="paragraph">
<p>Edit <code>src/main/webapp/app/Garage.js</code>:</p>
</div>
<div class="listingblock">
<div class="title">src/main/webapp/app/Garage.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">//...</span>
<span class="reserved">import</span> <span class="string"><span class="delimiter">'</span><span class="content">whatwg-fetch</span><span class="delimiter">'</span></span>;    <i class="conum" data-value="1"></i><b>(1)</b>

<span class="reserved">class</span> Garage <span class="reserved">extends</span> React.Component {

  constructor() {
    <span class="reserved">super</span>();

    <span class="local-variable">this</span>.state = {
      <span class="key">vehicles</span>: [] <i class="conum" data-value="2"></i><b>(2)</b>
    }
  }

  componentDidMount() { <i class="conum" data-value="3"></i><b>(3)</b>
    fetch(<span class="string"><span class="delimiter">'</span><span class="content">/vehicle</span><span class="delimiter">'</span></span>)
      .then(r =&gt; r.json())
      .then(json =&gt; <span class="local-variable">this</span>.setState({<span class="key">vehicles</span>: json}))
      .<span class="keyword">catch</span>(error =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Error retrieving vehicles: </span><span class="delimiter">'</span></span> + error));
  }
<span class="comment">//...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import the <code>fetch</code> library</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Remove the hard-coded data.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Load data from the API</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>componentDidMount</code> is one of React&#8217;s component lifecycle methods. It is fired as soon as the component is loaded on a page.  In this method, we use <code>fetch</code> to make a request (a GET request by default) to our <code>/vehicle</code> endpoint, parse the JSON payload, and call <code>this.setState</code> to update our <code>vehicles</code> collection with the data.</p>
</div>
<div class="paragraph">
<p>Restart the app (or wait for webpack to reload) to see the changes. You should now see the list of Vehicles from the Grails app displayed in the React <code>Vehicles</code> table.</p>
</div>


<h2 id="post">5.5 Posting data to the API</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/post.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Our last step in this guide is to create a simple form for posting new <code>Vehicle</code> instances to our API.</p>
</div>
<div class="paragraph">
<p>Create a new JavaScript file under <code>src/main/webapp/app</code> called <code>AddVehicleForm.js</code>, with the following content:</p>
</div>
<div class="listingblock">
<div class="title">src/main/webapp/app/AddVehicleForm.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> React from <span class="string"><span class="delimiter">'</span><span class="content">react</span><span class="delimiter">'</span></span>;
<span class="reserved">import</span> {array, func} from <span class="string"><span class="delimiter">'</span><span class="content">prop-types</span><span class="delimiter">'</span></span>;

<span class="reserved">class</span> AddVehicleForm <span class="reserved">extends</span> React.Component {

  constructor(props) {
    <span class="reserved">super</span>(props);
    <span class="local-variable">this</span>.state = { <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,
      <span class="key">make</span>: {<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>},
      <span class="key">model</span>: {<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>},
      <span class="key">driver</span>: {<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>}};
  }

  handleSubmit = (event) =&gt; { <i class="conum" data-value="2"></i><b>(2)</b>
    event.preventDefault();

    const {name, make, model, driver} = <span class="local-variable">this</span>.state;

    <span class="keyword">if</span> (!name || !make.id || !model.id || !driver.id) {
      console.warn(<span class="string"><span class="delimiter">&quot;</span><span class="content">missing required field!</span><span class="delimiter">&quot;</span></span>);
      <span class="keyword">return</span>;
    }
    <span class="local-variable">this</span>.props.onSubmit( {name, make, model, driver} ); <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="local-variable">this</span>.setState({ <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, <span class="key">make</span>: {<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>}, <span class="key">model</span>: {<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>}, <span class="key">driver</span>: {<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>}});
  };

  handleNameChange = (event) =&gt; { <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="local-variable">this</span>.setState({ <span class="key">name</span>: event.target.value });
  };

  handleMakeChange = (event) =&gt; { <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="local-variable">this</span>.setState({ <span class="key">make</span>: {<span class="key">id</span>: event.target.value} });
  };

  handleModelChange = (event) =&gt; { <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="local-variable">this</span>.setState({ <span class="key">model</span>: {<span class="key">id</span>: event.target.value} });
  };

  handleDriverChange = (event) =&gt; { <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="local-variable">this</span>.setState({ <span class="key">driver</span>: {<span class="key">id</span>: event.target.value} });
  };


  render() {

    <span class="keyword">function</span> <span class="function">renderSelectList</span>(item) { <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="keyword">return</span> <span class="tag">&lt;option</span> <span class="attribute-name">key</span>=<span class="error">{</span><span class="attribute-value">item.id</span><span class="error">}</span> <span class="attribute-name">value</span>=<span class="error">{</span><span class="attribute-value">item.id</span><span class="error">}</span><span class="tag">&gt;</span>{item.name}<span class="tag">&lt;/option&gt;</span>
    }

    <span class="keyword">return</span>(
      <span class="tag">&lt;div&gt;</span>
        <span class="tag">&lt;h3&gt;</span>Add a Vehicle:<span class="tag">&lt;/h3&gt;</span>
        <span class="tag">&lt;form</span> <span class="attribute-name">className</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form form-inline</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">onSubmit</span>=<span class="error">{</span><span class="attribute-value">this.handleSubmit</span><span class="error">}</span>  <span class="tag">&gt;</span>
          <span class="tag">&lt;label&gt;</span>Name<span class="tag">&lt;/label&gt;</span>
          <span class="tag">&lt;input</span> <span class="attribute-name">className</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-control</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="error">{</span> <span class="attribute-value">this.state.name</span> <span class="error">}</span> <span class="attribute-name">onChange</span>=<span class="error">{</span> <span class="attribute-value">this.handleNameChange</span> <span class="error">}</span> <span class="tag">/&gt;</span>

          <span class="tag">&lt;label&gt;</span>Make<span class="tag">&lt;/label&gt;</span>
          <span class="tag">&lt;select</span> <span class="attribute-name">className</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-control</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">make</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="error">{</span><span class="attribute-value">this.state.make.id</span><span class="error">}</span>
            <span class="attribute-name">onChange</span>=<span class="error">{</span><span class="attribute-value">this.handleMakeChange</span><span class="error">}</span><span class="tag">&gt;</span>  {/*<span class="tag">&lt;6&gt;</span>*/}
            <span class="tag">&lt;option</span> <span class="attribute-name">value</span>=<span class="error">{</span><span class="attribute-value">null</span><span class="error">}</span><span class="tag">&gt;</span>Select a Make...<span class="tag">&lt;/option&gt;</span>
            {this.props.makes.map(renderSelectList)}  {/*<span class="tag">&lt;5&gt;</span>*/}
          <span class="tag">&lt;/select&gt;</span>

          <span class="tag">&lt;label&gt;</span>Model<span class="tag">&lt;/label&gt;</span>
          <span class="tag">&lt;select</span> <span class="attribute-name">className</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-control</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">model</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="error">{</span><span class="attribute-value">this.state.model.id</span><span class="error">}</span>
            <span class="attribute-name">onChange</span>=<span class="error">{</span><span class="attribute-value">this.handleModelChange</span><span class="error">}</span><span class="tag">&gt;</span>  {/*<span class="tag">&lt;6&gt;</span>*/}
            <span class="tag">&lt;option</span> <span class="attribute-name">value</span>=<span class="error">{</span><span class="attribute-value">null</span><span class="error">}</span><span class="tag">&gt;</span>Select a Model...<span class="tag">&lt;/option&gt;</span>
            {this.props.models.map(renderSelectList)}  {/*<span class="tag">&lt;5&gt;</span>*/}
          <span class="tag">&lt;/select&gt;</span>

          <span class="tag">&lt;label&gt;</span>Driver<span class="tag">&lt;/label&gt;</span>
          <span class="tag">&lt;select</span> <span class="attribute-name">className</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">form-control</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">driver</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="error">{</span><span class="attribute-value">this.state.driver.id</span><span class="error">}</span>
            <span class="attribute-name">onChange</span>=<span class="error">{</span><span class="attribute-value">this.handleDriverChange</span><span class="error">}</span><span class="tag">&gt;</span>  {/*<span class="tag">&lt;6&gt;</span>*/}
            <span class="tag">&lt;option</span> <span class="attribute-name">value</span>=<span class="error">{</span><span class="attribute-value">null</span><span class="error">}</span><span class="tag">&gt;</span>Select a Driver...<span class="tag">&lt;/option&gt;</span>
            {this.props.drivers.map(renderSelectList)}  {/*<span class="tag">&lt;5&gt;</span>*/}
          <span class="tag">&lt;/select&gt;</span>

          <span class="tag">&lt;input</span> <span class="attribute-name">className</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">btn btn-success</span><span class="delimiter">&quot;</span></span>  <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Add to library</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/form&gt;</span>
      <span class="tag">&lt;/div&gt;</span>
    );

  }
}

AddVehicleForm.propTypes = {
  <span class="key">makes</span>: array,
  <span class="key">models</span>: array,
  <span class="key">drivers</span>: array,
  <span class="key">onSubmit</span>: func
};

<span class="reserved">export</span> <span class="keyword">default</span> AddVehicleForm;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Initialize <code>state</code> object with all the properties needed to populate a new Vehicle</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create event handler to handle form submission</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Pass the properties from <code>state</code> to the <code>onSubmit</code> callback function</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Event handlers to update <code>state</code> whenever user input is received</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Render options in <code>select</code> lists from the arrays in our props</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Call event handlers whenever user changes input value</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This is a fairly complex component, so don&#8217;t worry if you don&#8217;t understand it all immediately. The key points are that the <code>AddVehicleForm</code> component allows the user to set 4 properties needed to create a new Vehicle instance: <code>name</code>, <code>make</code>, <code>model</code> and <code>driver</code>. It takes a function prop called <code>onSubmit</code>, which is used when the form is submitted.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This pattern of passing functions (handlers) as props is good practice in React. It allows components to be reused easily because specific functionality can be swapped by different callers (e.g., by passing a different function as the <code>onSubmit</code> prop). Similarly as with <code>state</code>, centralizing your functional logic in a few components, and passing down those functions as props to child components, is a good pattern when programming with React. For a more semantic version of this pattern, you might consider a <a href="https://facebook.github.io/flux/">Flux implementation</a> such as <a href="http://redux.js.org/">Redux</a> to externalize both your <code>state</code> and your logic.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Because <code>make</code>, <code>model</code>, and <code>driver</code> are associations, we need to allow the user to select an ID so that Grails can perform the assignment during databinding. <code>AddVehicleForm</code> takes 3 props which it expects to contain arrays of these associations. We&#8217;ll need to provide them in order to use <code>AddUserForm</code>, so let&#8217;s edit the <code>Garage</code> component to retrieve those lists.</p>
</div>
<div class="paragraph">
<p>Edit <code>src/main/webapp/app/Garage.js</code>:</p>
</div>
<div class="listingblock">
<div class="title">src/main/webapp/app/Garage.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">//..</span>
<span class="reserved">import</span> AddVehicleForm from <span class="string"><span class="delimiter">'</span><span class="content">./AddVehicleForm</span><span class="delimiter">'</span></span>; <i class="conum" data-value="1"></i><b>(1)</b>

<span class="reserved">class</span> Garage <span class="reserved">extends</span> React.Component {

  constructor() {
    <span class="reserved">super</span>();

    <span class="local-variable">this</span>.state = {
      <span class="key">vehicles</span>: [],
      <span class="key">makes</span>: [],            <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="key">models</span>: [],
      <span class="key">drivers</span>: []
    }
  }

  componentDidMount() {
    fetch(<span class="string"><span class="delimiter">'</span><span class="content">/vehicle</span><span class="delimiter">'</span></span>)
      .then(r =&gt; r.json())
      .then(json =&gt; <span class="local-variable">this</span>.setState({<span class="key">vehicles</span>: json}))
      .<span class="keyword">catch</span>(error =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Error retrieving vehicles: </span><span class="delimiter">'</span></span> + error));

    fetch(<span class="string"><span class="delimiter">'</span><span class="content">/make</span><span class="delimiter">'</span></span>)                  <i class="conum" data-value="3"></i><b>(3)</b>
      .then(r =&gt; r.json())
      .then(json =&gt; <span class="local-variable">this</span>.setState({<span class="key">makes</span>: json}))
      .<span class="keyword">catch</span>(error =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Error retrieving makes: </span><span class="delimiter">'</span></span> + error));

    fetch(<span class="string"><span class="delimiter">'</span><span class="content">/model</span><span class="delimiter">'</span></span>)                 <i class="conum" data-value="3"></i><b>(3)</b>
      .then(r =&gt; r.json())
      .then(json =&gt; <span class="local-variable">this</span>.setState({<span class="key">models</span>: json}))
      .<span class="keyword">catch</span>(error =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Error retrieving models </span><span class="delimiter">'</span></span> + error));

    fetch(<span class="string"><span class="delimiter">'</span><span class="content">/driver</span><span class="delimiter">'</span></span>)                <i class="conum" data-value="3"></i><b>(3)</b>
      .then(r =&gt; r.json())
      .then(json =&gt; <span class="local-variable">this</span>.setState({<span class="key">drivers</span>: json}))
      .<span class="keyword">catch</span>(error =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Error retrieving drivers: </span><span class="delimiter">'</span></span> + error));

  }

  render() {
    const {vehicles, makes, models, drivers} = <span class="local-variable">this</span>.state;  <i class="conum" data-value="4"></i><b>(4)</b>

    <span class="keyword">return</span> <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;AddVehicleForm</span> <span class="attribute-name">makes</span>=<span class="error">{</span><span class="attribute-value">makes</span><span class="error">}</span> <span class="attribute-name">models</span>=<span class="error">{</span><span class="attribute-value">models</span><span class="error">}</span> <span class="attribute-name">drivers</span>=<span class="error">{</span><span class="attribute-value">drivers</span><span class="error">}</span><span class="tag">/&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
      <span class="tag">&lt;Vehicles</span> <span class="attribute-name">vehicles</span>=<span class="error">{</span><span class="attribute-value">vehicles</span><span class="error">}</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/div&gt;</span>;
  }
}
<span class="comment">//...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>AddVehicleForm</code> component</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Add <code>makes</code>, <code>models</code>, and <code>drivers</code> to <code>state</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Retrieve data from API</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Retrieve vehicles, makes, models, drivers from this.state using ES6 destructuring syntax</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Pass <code>makes</code>, <code>models</code>, and <code>drivers</code> to AddVehicleForm</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The final step is to implement the function that we will pass in to <code>AddVehicleForm</code> via the <code>onSubmit</code> prop. This function needs to do two things:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Post the new vehicle details to the API, and retrieve the result from the API</p>
</li>
<li>
<p>Update the <code>state</code> so that we can display the newly created vehicle in the <code>Vehicles</code> table</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Let&#8217;s implement this function. Edit <code>src/main/webapp/app/Garage.js</code> one more time:</p>
</div>
<div class="listingblock">
<div class="title">src/main/webapp/app/Garage.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">//..</span>

<span class="reserved">class</span> Garage <span class="reserved">extends</span> React.Component {

  <span class="comment">//...</span>

  submitNewVehicle = (vehicle) =&gt; {   <i class="conum" data-value="1"></i><b>(1)</b>
    fetch(<span class="string"><span class="delimiter">'</span><span class="content">/vehicle</span><span class="delimiter">'</span></span>, {
      <span class="key">method</span>: <span class="string"><span class="delimiter">'</span><span class="content">POST</span><span class="delimiter">'</span></span>,
      <span class="key">headers</span>: { <span class="key"><span class="delimiter">'</span><span class="content">Content-Type</span><span class="delimiter">'</span></span>: <span class="string"><span class="delimiter">'</span><span class="content">application/json</span><span class="delimiter">'</span></span> },
      <span class="key">body</span>: JSON.stringify(vehicle)
    }).then(r =&gt; r.json())
      .then(json =&gt; {
        let vehicles = <span class="local-variable">this</span>.state.vehicles;
        vehicles.push({<span class="key">id</span>: json.id, <span class="key">name</span>: json.name, <span class="key">make</span>: json.make, <span class="key">model</span>: json.model, <span class="key">driver</span>: json.driver});
        <span class="local-variable">this</span>.setState({vehicles});
      })
      .<span class="keyword">catch</span>(ex =&gt; console.error(<span class="string"><span class="delimiter">'</span><span class="content">Unable to save vehicle</span><span class="delimiter">'</span></span>, ex));
  };


  render() {
    const {vehicles, makes, models, drivers} = <span class="local-variable">this</span>.state;

    <span class="keyword">return</span> <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;AddVehicleForm</span> <span class="attribute-name">onSubmit</span>=<span class="error">{</span><span class="attribute-value">this.submitNewVehicle</span><span class="error">}</span> <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="attribute-name">makes</span>=<span class="error">{</span><span class="attribute-value">makes</span><span class="error">}</span> <span class="attribute-name">models</span>=<span class="error">{</span><span class="attribute-value">models</span><span class="error">}</span> <span class="attribute-name">drivers</span>=<span class="error">{</span><span class="attribute-value">drivers</span><span class="error">}</span><span class="tag">/&gt;</span>
      <span class="tag">&lt;Vehicles</span> <span class="attribute-name">vehicles</span>=<span class="error">{</span><span class="attribute-value">vehicles</span><span class="error">}</span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/div&gt;</span>;
  }
}


ReactDOM.render(&lt;Garage /&gt;, document.getElementById(<span class="string"><span class="delimiter">'</span><span class="content">garage</span><span class="delimiter">'</span></span>));
<span class="comment">//...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create <code>submitNewVehicle</code> function</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Pass function as <code>onSubmit</code> prop to <code>AddVehicleForm</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Again, we&#8217;re using the <code>fetch</code> API, this time for a POST request to the <code>/vehicle</code> endpoint.  We call <code>JSON.stringify</code> to convert the parameters received from <code>AddVehicleForm</code> into a JSON string, which we can then post to our Grails API. The API will return the newly created vehicle instance, which we can then parse and insert into our <code>state</code> object with <code>this.setState</code>.</p>
</div>
<div class="paragraph">
<p>Restart the app, or re-run webpack, and you should be able to create new Vehicle instances and see them added to the table. Refresh the page to confirm the new instance was persisted to the database.</p>
</div>


<h1 id="nextSteps">6 Next Steps</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/nextSteps.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>There&#8217;s plenty of opportunities to expand the scope of this application. Here are a few ideas for improvements you can make on your own:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a modal dialog form to add new Drivers, Makes &amp; Models. Use React-Bootstrap&#8217;s <code>Modal</code> component to give you a headstart.</p>
</li>
<li>
<p>Add support for updates to existing Vehicles. A modal dialog might work well for this as well, or perhaps an editable table row</p>
</li>
<li>
<p>Currently Makes &amp; Models are independent. Add an appropriate GORM association between Make &amp; Model, and change the select lists to only display Models for the currently select Make. You will want to make use of the JavaScript <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>Array.filter</code></a> method.</p>
</li>
</ul>
</div>


<h1 id="helpWithGrails">7 Do you need help with Grails?</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/building-a-react-app/edit/master/src/main/docs/guide/helpWithGrails.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<h3 style="color: #333;">OCI sponsored the creation of this Guide. OCI offers several <a href="https://objectcomputing.com/products/grails/consulting-support/">Grails services</a>:</h3>

<img src="../img/oci-grails-services.svg"/>

<h3>Free consultation </h3>

<!-- This is the code that is needed to run the form -->

<!--Copy and paste into the document's head or body.-->

<script type="text/javascript">

    /** This section is only needed once per page if manually copying **/
    if (typeof MauticSDKLoaded == 'undefined') {
        var MauticSDKLoaded = true;
        var head            = document.getElementsByTagName('head')[0];
        var script          = document.createElement('script');
        script.type         = 'text/javascript';
        script.src          = 'https://mautic.objectcomputing.com/media/js/mautic-form.js';
        script.onload       = function() {
            MauticSDK.onLoad();
        };
        head.appendChild(script);
        var MauticDomain = 'https://mautic.objectcomputing.com';
        var MauticLang   = {
            'submittingMessage': "Please wait..."
        }
    }
</script>

<!--Copy and paste into the document's body.-->

<style type="text/css" scoped>
    .mauticform_wrapper { max-width: 600px; margin: 10px auto; }
    .mauticform-innerform {}
    .mauticform-post-success {}
    .mauticform-name { font-weight: bold; font-size: 1.5em; margin-bottom: 3px; }
    .mauticform-description { margin-top: 2px; margin-bottom: 10px; }
    .mauticform-error { margin-bottom: 10px; color: red; }
    .mauticform-message { margin-bottom: 10px;color: green; }
    .mauticform-row { display: block; margin-bottom: 20px; }
    .mauticform-label { font-size: 1.1em; display: block; font-weight: bold; margin-bottom: 5px; }
    .mauticform-row.mauticform-required .mauticform-label:after { color: #e32; content: " *"; display: inline; }
    .mauticform-helpmessage { display: block; font-size: 0.9em; margin-bottom: 3px; }
    .mauticform-errormsg { display: block; color: red; margin-top: 2px; }
    .mauticform-selectbox, .mauticform-input, .mauticform-textarea { width: 100%; padding: 0.5em 0.5em; border: 1px solid #CCC; background: #fff; box-shadow: 0px 0px 0px #fff inset; border-radius: 4px; box-sizing: border-box; }
    .mauticform-checkboxgrp-row {}
    .mauticform-checkboxgrp-label { font-weight: normal; }
    .mauticform-checkboxgrp-checkbox {}
    .mauticform-radiogrp-row {}
    .mauticform-radiogrp-label { font-weight: normal; }
    .mauticform-radiogrp-radio {}
    .mauticform-button-wrapper .mauticform-button.btn-default, .mauticform-pagebreak-wrapper .mauticform-pagebreak.btn-default { font-size: 14px; color: #fff;background-color: #feb672 ;border-color: #dddddd; padding: 15px 30px;}
    .mauticform-button-wrapper .mauticform-button, .mauticform-pagebreak-wrapper .mauticform-pagebreak { display: inline-block;margin-bottom: 0;font-weight: 600;text-align: center;vertical-align: middle;cursor: pointer;background-image: none;border: 1px solid transparent;white-space: nowrap;padding: 6px 12px;font-size: 13px;line-height: 1.3856;border-radius: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}
    .mauticform-button-wrapper .mauticform-button.btn-default[disabled], .mauticform-pagebreak-wrapper .mauticform-pagebreak.btn-default[disabled] { background-color:#feb672; border-color: #dddddd; opacity: 0.75; cursor: not-allowed; font-size: 14px; color: #fff; padding: 15px 30px;}
    .mauticform-pagebreak-wrapper .mauticform-button-wrapper {  display: inline; }
</style>
<div id="mauticform_wrapper_grailsorgconsultationform" class="mauticform_wrapper">
    <form autocomplete="false" role="form" method="post" action="https://mautic.objectcomputing.com/form/submit?formId=3" id="mauticform_grailsorgconsultationform" data-mautic-form="grailsorgconsultationform">

        <div class="mauticform-innerform">

          <div class="mauticform-page-wrapper mauticform-page-1" data-mautic-form-page="1">

            <div id="mauticform_grailsorgconsultationform_first_name"  data-validate="first_name" data-validation-type="text" class="mauticform-row mauticform-text mauticform-field-1 mauticform-required col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_first_name" name="mauticform[first_name]" value="" placeholder="First Name *" class="mauticform-input" type="text" />
                <span class="mauticform-errormsg" style="display: none;">This is required.</span>
            </div>

            <div id="mauticform_grailsorgconsultationform_last_name"  data-validate="last_name" data-validation-type="text" class="mauticform-row mauticform-text mauticform-field-2 mauticform-required col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_last_name" name="mauticform[last_name]" value="" placeholder="Last Name *" class="mauticform-input" type="text" />
                <span class="mauticform-errormsg" style="display: none;">This is required.</span>
            </div>

            <div id="mauticform_grailsorgconsultationform_email"  data-validate="email" data-validation-type="email" class="mauticform-row mauticform-email mauticform-field-3 mauticform-required col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_email" name="mauticform[email]" value="" placeholder="Email *" class="mauticform-input" type="email" />
                <span class="mauticform-errormsg" style="display: none;">This is required.</span>
            </div>

            <div id="mauticform_grailsorgconsultationform_phone"  class="mauticform-row mauticform-tel mauticform-field-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_phone" name="mauticform[phone]" value="" placeholder="Phone" class="mauticform-input" type="tel" />
                <span class="mauticform-errormsg" style="display: none;"></span>
            </div>

            <div id="mauticform_grailsorgconsultationform_company"  class="mauticform-row mauticform-text mauticform-field-5 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_company" name="mauticform[company]" value="" placeholder="Company" class="mauticform-input" type="text" />
                <span class="mauticform-errormsg" style="display: none;"></span>
            </div>

            <div id="mauticform_grailsorgconsultationform_submit"  class="mauticform-row mauticform-button-wrapper mauticform-field-6" style="">
                <button type="submit" name="mauticform[submit]" id="mauticform_input_grailsorgconsultationform_submit" name="mauticform[submit]" value="" class="mauticform-button btn btn-default" value="1" style="border: none; margin-left: 14px;">SUBMIT</button>
            </div>
            </div>
        </div>

        <input type="hidden" name="mauticform[formId]" id="mauticform_grailsorgconsultationform_id" value="3"/>
        <input type="hidden" name="mauticform[return]" id="mauticform_grailsorgconsultationform_return" value=""/>
        <input type="hidden" name="mauticform[formName]" id="mauticform_grailsorgconsultationform_name" value="grailsorgconsultationform"/>
</form>
</div>

<!--The code below is the message that appears when someone hits submit. Feel free to style this how you see fit for Grails.org. All CSS is handled in the above code.-->

<div class="mauticform-error" id="mauticform_grailsorgconsultationform_error"></div>
<div class="mauticform-message" id="mauticform_grailsorgconsultationform_message"></div>

<h3 style="color: #333;">The <a href="https://objectcomputing.com/products/grails/consulting-support/">OCI Grails Team</a>
includes Grails co-founders, <b>Jeff Scott Brown and Graeme Rocher</b>.
Check our <a href="https://objectcomputing.com/training/catalog/grails/">Grails courses</a> and learn from the engineers who developed,
matured and maintain Grails.</h3>

<img src="../img/ocigrailsteam.png" style="max-width: 748px; width: 100%;" alt="Grails OCI Team">

</article></div><footer>
  <div class='content'>
    <div class='ocihometograils'>
      <span>Sponsored by</span>
      <a href='https://objectcomputing.com/products/grails/'><img class='' src='/images/oci_home_to_grails.svg' alt='Object Computing - Home to Grails' width='300px' /></a>
    </div>
    <nav class='socialmedianav'><ul>
  <li>
    <a href='https://grails-slack.cfapps.io'><img class='' src='/images/slack.svg' alt='Slack Icon' /></a>
  </li>
  <li>
    <a href='https://www.youtube.com/watch?v=XnRNfDGkBVg&amp;list=PLI74De5M9T73uH3WilDCePP2qfSDpMaGu'><img class='' src='/images/youtube.svg' alt='Youtube Icon' /></a>
  </li>
  <li>
    <a href='https://www.linkedin.com/groups/39757'><img class='' src='/images/linkedin.svg' alt='LinkedIn Icon' /></a>
  </li>
  <li>
    <a href='https://github.com/grails/'><img class='' src='/images/github.svg' alt='Github Icon' /></a>
  </li>
  <li>
    <a href='https://twitter.com/grailsframework'><img class='' src='/images/twitter.svg' alt='Twitter Icon' /></a>
  </li>
</ul></nav>
    <nav class='partnersnav'><ul>
  <li>Grails' repositories are hosted by
    <a href='http://artifactoryonline.com/'>Artifactory</a>
  </li>
  <li>Website hosting provided by
    <a href='http://run.pivotal.io/'>Pivotal</a>
  </li>
  <li>YourKit supports Grails with its 
    <a href='https://www.yourkit.com/java/profiler/index.jsp'>Java Profiler</a>
  </li>
  <li>Grails is Open Source
    <a href='http://www.apache.org/licenses/LICENSE-2.0.html'>Apache 2 License</a>
  </li>
  <li>
    <a href='https://grails.org/buildstatus.html'>Build Status</a>
  </li>
</ul></nav>
  </div>
</footer><div>
  <script type='text/javascript'>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-82213539-2', 'auto');
              ga('send', 'pageview');
</script>
  <script type='text/javascript'>
adroll_adv_id = "HBWJH4CQCJGS5DJRSB4Z4D";
adroll_pix_id = "IVEQYFOZXZAPZMDVQH7BFE";
/* OPTIONAL: provide email to improve user identification */
/* adroll_email = "username@example.com"; */
(function () {
    var _onload = function(){
        if (document.readyState && !/loaded|complete/.test(document.readyState)){setTimeout(_onload, 10);return}
        if (!window.__adroll_loaded){__adroll_loaded=true;setTimeout(_onload, 50);return}
        var scr = document.createElement("script");
        var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
        scr.setAttribute('async', 'true');
        scr.type = "text/javascript";
        scr.src = host + "/j/roundtrip.js";
        ((document.getElementsByTagName('head') || [null])[0] ||
            document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
    };
    if (window.addEventListener) {window.addEventListener('load', _onload, false);}
    else {window.attachEvent('onload', _onload)}
}());            
</script>
</div></body>
</html>