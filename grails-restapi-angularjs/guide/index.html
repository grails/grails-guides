<!DOCTYPE html>
<html>
  <head>
    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <link rel='icon' href='../img/favicon.ico' />
    <link rel='mask-icon' href='/../img/grails-pinned-icon.svg' color='feb672' />
    <meta charset='UTF-8' />
    <title>Building a REST API with Grails and AngularJS 1.x | Grails Guides | Grails Framework</title>
    <meta name='description' content='Building a REST API with Grails and AngularJS 1.x. Build a backend for an already existing AngularJS application (Angular 1) with Grails rest api profile' />
    <link rel='stylesheet' href='../css/main.css' />
    <link rel='stylesheet' href='../css/screen.css' />
    <script src='https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js'></script>
  </head>
  <body class='guide'><header class='mainheader'>
  <div class='content'>
    <a href='http://grails.org/index.html'><img class='grailslogo' src='../img/grails_logo.svg' alt='Grails Logo' /></a>
    <a href='javascript:show(&apos;topmenus&apos;, &apos;showNavigationLink&apos;)' id='showNavigationLink' class='mobile align-center'>Show Navigation</a>
    <div id='topmenus'>
      <nav class='secondarymenu' id='secondarymenu'><ul>
  <li>
    <a href='http://grailsblog.objectcomputing.com'>Blog</a>
  </li>
  <li>
    <a href='http://grails.org/community.html'>Community</a>
  </li>
  <li>
    <a href='http://grails.org/books.html'>Books</a>
  </li>
  <li>
    <a href='http://grails.org/search.html'>Search</a>
  </li>
</ul></nav>
      <nav class='mainmenu' id='mainmenu'><ul>
  <li>
    <a href='http://grails.org/documentation.html'>Documentation</a>
  </li>
  <li>
    <a href='http://grails.org/download.html'>Download</a>
  </li>
  <li>
    <a href='http://plugins.grails.org'>Plugins</a>
  </li>
  <li>
    <a href='http://guides.grails.org/index.html'>Learning</a>
  </li>
  <li>
    <a href='http://grails.org/faq.html'>FAQ</a>
  </li>
  <li>
    <a href='http://grails.org/support.html'>Support</a>
  </li>
</ul></nav>
    </div>
  </div>
</header><div class='fullwidth'><article class="guide">
    <aside>
        <a href="https://travis-ci.org/grails-guides/grails-restapi-angularjs"><img src="https://travis-ci.org/grails-guides/grails-restapi-angularjs.svg?branch=master"></a>

        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/grails-guides/grails-restapi-angularjs&quot;"><img height="15" src="../img/github_white.svg" alt="Github"/><span>&nbsp;Get the Code</span></button>


        <ul class="githublinks">
            <li><button type="button" class="btn btn-default" href="#" onclick="document.getElementById('github-url').value='git@github.com:grails-guides/grails-restapi-angularjs.git'" class="codeButton">SSH</button></li>
            <li><button type="button" class="btn btn-default" onclick="document.getElementById('github-url').value='https://github.com/grails-guides/grails-restapi-angularjs.git'" class="codeButton">HTTPS</button></li>
        </ul>
        <div class="input-group">
            <!-- Target -->
            <input id="github-url" value="git@github.com:grails-guides/grails-restapi-angularjs.git" type="text" />
            <!-- Trigger -->
            <button type="button" class="clippy btn btn-default" type="button" data-clipboard-target="#github-url">
                <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
            </button>
        </div>
        <script>var clipboard = new Clipboard('.clippy');</script>
        <button type="button" class="btn btn-large" onclick="window.location.href=&quot;https://github.com/grails-guides/grails-restapi-angularjs/archive/master.zip&quot;">Download ZIP</button>
        
        <div id="table-of-content">
            <h3>Table of Contents</h3>
            
            <div class="toc-item" style="margin-left:0px"><a href="#training"><strong>1</strong><span>Grails Training</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#gettingStarted"><strong>2</strong><span>Getting Started</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#requirements"><strong>2.1</strong><span>What you will need</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#howto"><strong>2.2</strong><span>How to complete the guide</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#initialAngularApplication"><strong>3</strong><span>Initial Angular Application</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#writingTheApp"><strong>4</strong><span>Writing the Grails Application</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#domainClass"><strong>4.1</strong><span>Domain Class</span></a></div>
            
            <div class="toc-item" style="margin-left:10px"><a href="#enableCors"><strong>4.2</strong><span>Enable CORS</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#completeAngularApplication"><strong>5</strong><span>Connect Angular Application to Grails</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#runningTheApp"><strong>6</strong><span>Running the Application</span></a></div>
            
            <div class="toc-item" style="margin-left:0px"><a href="#helpWithGrails"><strong>7</strong><span>Do you need help with Grails?</span></a></div>
            
            <div style="clear:both" ></div>
        </div>
        
    </aside>
    <header>
        <h1>Building a REST API with Grails and AngularJS 1.x</h1>
        <p>Build a backend for an already existing AngularJS application (Angular 1) with Grails rest api profile</p>
        <p><strong>Authors:</strong> Sergio del Amo</p>
        <p><strong>Grails Version:</strong> 3.3.0</p>
    </header>
    

<h1 id="training">1 Grails Training</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/training.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p><strong>Grails Training</strong> - Developed and delivered by the folks who created and actively maintain the Grails framework!.</p>
</div>
<div id="ocitraining"></div>
<script type="text/javascript">
var getJSON = function(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.responseType = 'json';
    xhr.onload = function() {
      var status = xhr.status;
      if (status == 200) {
        callback(null, xhr.response);
      } else {
        callback(status);
      }
    };
    xhr.send();
};
var ociTrainingTrack = 11;
getJSON('http://plugins.grails.org/api/training/'+ ociTrainingTrack, function(err, data) {
  var msg = '';
  if (err != null) {
      msg = 'Something went wrong while retrieving OCI training offerings';

  } else {
      if ( data.length == 0 ) {
         msg = '<p><b>Currenlty, we don\'t have any training offerings available</b></p>.';

      } else {
        msg += '<table>';
        msg += '<thead>';
        msg += '<tr><th>Course</th><th>Date(s)</th><th>Instructor(s)</th><th>Hour(s)</th></tr>';
        msg += '</thead>';
        msg += '<tbody>';
        for ( var i = 0; i < data.length; i++ ) {
            msg += '<tr><td><a href="'+ data[i].enrollmentLink + '">'+ data[i].course + '</a></td><td>'+ data[i].dates + '</td><td>'+ data[i].instructors + '</td><td>'+ data[i].hours + '</td></tr>';
        }
        msg += '</tbody>';
        msg += '</table>';
      }
  }
  var ociTraining = document.getElementById("ocitraining");
  ociTraining.innerHTML = msg;
});
</script>


<h1 id="gettingStarted">2 Getting Started</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/gettingStarted.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>In this guide you are going to connect an existing AngularJS todo app to a Grails backend.</p>
</div>


<h2 id="requirements">2.1 What you will need</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/requirements.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To complete this guide, you will need the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some time on your hands</p>
</li>
<li>
<p>A decent text editor or IDE</p>
</li>
<li>
<p>JDK 1.7 or greater installed with <code>JAVA_HOME</code> configured appropriately</p>
</li>
</ul>
</div>


<h2 id="howto">2.2 How to complete the guide</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/howto.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To get started do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/grails-guides/grails-restapi-angularjs/archive/master.zip">Download</a> and unzip the source</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Clone the <a href="https://git-scm.com/">Git</a> repository:<br>
<code>git clone <a href="https://github.com/grails-guides/grails-restapi-angularjs.git" class="bare">https://github.com/grails-guides/grails-restapi-angularjs.git</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Grails guides repositories contain two folders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>initial</code>  Initial project. Often a simple Grails app with some additional code to give you a head-start.</p>
</li>
<li>
<p><code>complete</code> A completed example. It is the result of working through the steps presented by the guide and applying those changes to the <code>initial</code> folder.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To complete the guide, go to the <code>initial</code> folder</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cd</code> into <code>grails-guides/grails-restapi-angularjs/initial</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and follow the instructions in the next sections.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can go right to the <strong>completed example</strong> if you <code>cd</code> into <code>grails-guides/grails-restapi-angularjs/complete</code>
</td>
</tr>
</table>
</div>


<h1 id="initialAngularApplication">3 Initial Angular Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/initialAngularApplication.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="imageblock">
<div class="content">
<a class="image" href="https://teamtreehouse.com/library/angularjs-3"><img src="../img/treehouse.png" alt="treehouse"></a>
</div>
</div>
<div class="paragraph">
<p>This section displays the code developed during the <a href="https://teamtreehouse.com/library/angularjs-3">Treehouse AngularJS course</a>.
During that course an AngularJS application is developed. The application is a todo list manager.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The initial AngularJS app is not connected to any backend. If you refreshed the browser, todo list changes are lost.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/initial.gif" alt="initial">
</div>
</div>
<div class="paragraph">
<p><code>index.html</code> is the entry point to our AngularJS app.</p>
</div>
<div class="listingblock">
<div class="title">/initial-angularjs/index.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;title&gt;</span><span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">'</span><span class="content">https://fonts.googleapis.com/css?family=Varela+Round</span><span class="delimiter">'</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">'</span><span class="content">stylesheet</span><span class="delimiter">'</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">'</span><span class="content">text/css</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">'</span><span class="content">styles/main.css</span><span class="delimiter">'</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">'</span><span class="content">stylesheet</span><span class="delimiter">'</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/css</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body</span> <span class="attribute-name">ng-app</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todoListApp</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;h1&gt;</span>My TODOs<span class="tag">&lt;/h1&gt;</span>
  <span class="tag">&lt;todos&gt;</span><span class="tag">&lt;/todos&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vendor/angular.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">scripts/app.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">scripts/controllers/main.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">scripts/services/data.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">scripts/directives/todos.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We create the AngularJS application, in <code>app.js</code></p>
</div>
<div class="listingblock">
<div class="title">/initial-angularjs/scripts/app.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">angular.module(<span class="string"><span class="delimiter">&quot;</span><span class="content">todoListApp</span><span class="delimiter">&quot;</span></span>, []);</code></pre>
</div>
</div>
<div class="paragraph">
<p>An AngularJS controller manages the application flow:</p>
</div>
<div class="listingblock">
<div class="title">/initial-angularjs/scripts/controllers/main.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="string"><span class="delimiter">'</span><span class="content">use strict</span><span class="delimiter">'</span></span>;

angular.module(<span class="string"><span class="delimiter">'</span><span class="content">todoListApp</span><span class="delimiter">'</span></span>)
.controller(<span class="string"><span class="delimiter">'</span><span class="content">mainCtrl</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$scope</span>, dataService) {
  <span class="predefined">$scope</span>.<span class="function">addTodo</span> = <span class="keyword">function</span>() {
    <span class="keyword">var</span> todo = {<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">This is a new todo.</span><span class="delimiter">&quot;</span></span>};
    <span class="predefined">$scope</span>.todos.unshift(todo);
  };

  dataService.getTodos(<span class="keyword">function</span>(response) {
      <span class="predefined">$scope</span>.todos = response.data;
    });

  <span class="predefined">$scope</span>.<span class="function">deleteTodo</span> = <span class="keyword">function</span>(todo, <span class="predefined">$index</span>) {
    dataService.deleteTodo(todo);
    <span class="predefined">$scope</span>.todos.splice(<span class="predefined">$index</span>, <span class="integer">1</span>);
  };

  <span class="predefined">$scope</span>.<span class="function">saveTodo</span> = <span class="keyword">function</span>(todo) {
    dataService.saveTodo(todo);
  };
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>We have a <code>todos</code> directive. This directive uses the previous controller and the next template:</p>
</div>
<div class="listingblock">
<div class="title">/initial-angularjs/scripts/directives/todos.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">angular.module(<span class="string"><span class="delimiter">'</span><span class="content">todoListApp</span><span class="delimiter">'</span></span>)
.directive(<span class="string"><span class="delimiter">'</span><span class="content">todos</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
  <span class="keyword">return</span> {
    <span class="key">templateUrl</span>: <span class="string"><span class="delimiter">'</span><span class="content">templates/todos.html</span><span class="delimiter">'</span></span>,
    <span class="key">controller</span>: <span class="string"><span class="delimiter">'</span><span class="content">mainCtrl</span><span class="delimiter">'</span></span>,
    <span class="key">replace</span>: <span class="predefined-constant">true</span>
  }
})</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/initial-angularjs/templates/todos.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">add</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">addTodo()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>+ Add a New Task<span class="tag">&lt;/a&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{'editing-item': editing, 'edited': todo.edited, 'completed': todo.completed}</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">ng-repeat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo in todos | orderBy: 'completed'</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-init</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo.completed = false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;input</span> <span class="attribute-name">ng-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo.completed</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">checkbox</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;span</span> <span class="attribute-name">ng-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo.completed = !todo.completed; todo.edited = true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;label</span> <span class="attribute-name">ng-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing = true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-hide</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      {{todo.name}}<span class="tag">&lt;/label&gt;</span>
    <span class="tag">&lt;input</span> <span class="attribute-name">ng-change</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo.edited = true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-blur</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing = false;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-show</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo.name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing-label</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">actions</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">saveTodo(todo)</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Save<span class="tag">&lt;/a&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">deleteTodo(todo, $index)</span><span class="delimiter">&quot;</span></span>  <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Delete</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>delete<span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
   &lt;<span class="regexp"><span class="delimiter">/</span><span class="content">div&gt;
&lt;</span><span class="delimiter">/</span></span>div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Our data service is currently loading todos from a mock json file.</p>
</div>
<div class="listingblock">
<div class="title">/initial-angularjs/scripts/services/data.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="string"><span class="delimiter">'</span><span class="content">use strict</span><span class="delimiter">'</span></span>;

angular.module(<span class="string"><span class="delimiter">'</span><span class="content">todoListApp</span><span class="delimiter">'</span></span>)
.service(<span class="string"><span class="delimiter">'</span><span class="content">dataService</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$http</span>) {
  <span class="local-variable">this</span>.<span class="function">getTodos</span> = <span class="keyword">function</span>(callback){
    <span class="predefined">$http</span>.get(<span class="string"><span class="delimiter">'</span><span class="content">mock/todos.json</span><span class="delimiter">'</span></span>)
    .then(callback)
  };

  <span class="local-variable">this</span>.<span class="function">deleteTodo</span> = <span class="keyword">function</span>(todo) {
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The </span><span class="delimiter">&quot;</span></span> + todo.name + <span class="string"><span class="delimiter">&quot;</span><span class="content"> todo has been deleted!</span><span class="delimiter">&quot;</span></span>)
  };

  <span class="local-variable">this</span>.<span class="function">saveTodo</span> = <span class="keyword">function</span>(todo) {
    console.log(<span class="string"><span class="delimiter">&quot;</span><span class="content">The </span><span class="delimiter">&quot;</span></span> + todo.name + <span class="string"><span class="delimiter">&quot;</span><span class="content"> todo has been saved!</span><span class="delimiter">&quot;</span></span>);
  };

});</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/initial-angularjs/mock/todos.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">[
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">clean the house</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">water the dog</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">feed the lawn</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">pay dem bills</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">run</span><span class="delimiter">&quot;</span></span>},
    {<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">swim</span><span class="delimiter">&quot;</span></span>}
  ]</code></pre>
</div>
</div>


<h1 id="writingTheApp">4 Writing the Grails Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/writingTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The initial project, which we are going to work on, was generated with <a href="http://docs.grails.org/latest/guide/webServices.html#restProfile">Grails REST profile</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">grails create-app myapp --profile=rest-api</code></pre>
</div>
</div>


<h2 id="domainClass">4.1 Domain Class</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/domainClass.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Create a persistent entity to store Todos. Most common way to handle persistence in Grails is the use of <a href="https://docs.grails.org/latest/ref/Domain%20Classes/Usage.html">Grails Domain Classes</a>:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A domain class fulfills the M in the Model View Controller (MVC) pattern and represents a persistent entity that is
mapped onto an underlying database table. In Grails a domain is a class that lives in the grails-app/domain directory.</p>
</div>
</blockquote>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">complete$ ./grailsw create-domain-class Todo</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Todo</code> domain class is our data model. We define different properties to store the <code>Todo</code> characteristics.</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/domain/demo/Todo.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">grails.rest.Resource</span>

<span class="annotation">@Resource</span>(uri=<span class="string"><span class="delimiter">'</span><span class="content">/todos</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Todo</span> {
    <span class="predefined-type">String</span> name
    <span class="type">boolean</span> completed

    <span class="directive">static</span> constraints = {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>With a <a href="http://docs.grails.org/latest/guide/testing.html">Unit Test</a>, we test that <code>name</code> is a required property.</p>
</div>
<div class="listingblock">
<div class="title">/src/test/groovy/demo/TodoSpec.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="keyword">import</span> <span class="include">spock.lang.Specification</span>
<span class="keyword">import</span> <span class="include">grails.testing.gorm.DomainUnitTest</span>

<span class="type">class</span> <span class="class">TodoSpec</span> <span class="directive">extends</span> Specification <span class="directive">implements</span> DomainUnitTest&lt;Todo&gt; {

    <span class="type">void</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">test name is required</span><span class="delimiter">&quot;</span></span>() {
        <span class="key">when</span>:
        <span class="keyword">def</span> todo = <span class="keyword">new</span> Todo(<span class="key">name</span>: name)

        <span class="key">then</span>:
        !todo.validate()
        todo.errors[<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>].code == errorCode

        <span class="key">where</span>:
        name | errorCode
        <span class="predefined-constant">null</span> | <span class="string"><span class="delimiter">'</span><span class="content">nullable</span><span class="delimiter">'</span></span>
        <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>   | <span class="string"><span class="delimiter">'</span><span class="content">nullable</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We then load some test data in <code>BootStrap.groovy</code>.</p>
</div>
<div class="listingblock">
<div class="title">/grails-app/init/demo/BootStrap.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">package</span> demo

<span class="reserved">class</span> BootStrap {

    def init = { servletContext -&gt;

        def todos = [
                [name: <span class="string"><span class="delimiter">'</span><span class="content">clean the house</span><span class="delimiter">'</span></span>],
                [name: <span class="string"><span class="delimiter">'</span><span class="content">water the dog</span><span class="delimiter">'</span></span>],
                [name: <span class="string"><span class="delimiter">'</span><span class="content">feed the lawn</span><span class="delimiter">'</span></span>],
                [name: <span class="string"><span class="delimiter">'</span><span class="content">pay dem bills</span><span class="delimiter">'</span></span>],
                [name: <span class="string"><span class="delimiter">'</span><span class="content">run</span><span class="delimiter">'</span></span>],
                [name: <span class="string"><span class="delimiter">'</span><span class="content">swim</span><span class="delimiter">'</span></span>]
        ].each { <span class="keyword">new</span> Todo(name: it.name).save() }
    }
    def destroy = {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>We annotated the domain class with <code>@Resource</code></strong></p>
</div>
<div class="listingblock">
<div class="title">/grails-app/domain/demo/Todo.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">grails.rest.Resource</span>

<span class="annotation">@Resource</span>(uri=<span class="string"><span class="delimiter">'</span><span class="content">/todos</span><span class="delimiter">'</span></span>)
<span class="type">class</span> <span class="class">Todo</span> {</code></pre>
</div>
</div>
<div class="paragraph">
<p>This annotation exposes the <code>Todo</code> domain class as a <a href="https://docs.grails.org/latest/guide/webServices.html#domainResources">REST resource</a></p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The easiest way to create a RESTful API in Grails is to expose a domain class as a REST resource.
Simply by adding the Resource transformation and specifying a URI, your domain class will automatically be available
as a REST resource in either XML or JSON formats.
The transformation will automatically create a controller called TodoController and register the necessary RESTful URL mapping</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This is the URL Mapping registered for our domain class.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP Method	URI	Grails Action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grails Action</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/todos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/todos/create</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/todos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">save</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/todos/${id}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">show</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/todos/${id}/edit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">edit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/todos/${id}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">update</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/todos/${id}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">delete</p></td>
</tr>
</tbody>
</table>


<h2 id="enableCors">4.2 Enable CORS</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/enableCors.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Because the client side (AngularJS) and server side (Grails) will be running on separate ports, <a href="https://docs.grails.org/latest/guide/theWebLayer.html#cors">CORS</a> configuration is required.</p>
</div>
<div class="paragraph">
<p>Modify your <code>application.yml</code> to enable CORS</p>
</div>
<div class="listingblock">
<div class="title">/complete/grails-app/conf/application.yml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="key">grails</span>:
    <span class="key">cors</span>:
        <span class="key">enabled</span>: <span class="predefined-constant">true</span></code></pre>
</div>
</div>


<h1 id="completeAngularApplication">5 Connect Angular Application to Grails</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/completeAngularApplication.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>We add a directive to detect when the users presses ENTER while editing a Todo name</p>
</div>
<div class="listingblock">
<div class="title">/complete-angularjs/index.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">scripts/directives/ngEnter.js</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/complete-angularjs/scripts/directives/ngEnter.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">angular.module(<span class="string"><span class="delimiter">'</span><span class="content">todoListApp</span><span class="delimiter">'</span></span>)
.directive(<span class="string"><span class="delimiter">'</span><span class="content">ngEnter</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
        <span class="keyword">return</span> <span class="keyword">function</span>(scope, element, attrs) {
            element.bind(<span class="string"><span class="delimiter">&quot;</span><span class="content">keydown keypress</span><span class="delimiter">&quot;</span></span>, <span class="keyword">function</span>(event) {
                <span class="keyword">if</span>(event.which === <span class="integer">13</span>) {
                    scope.<span class="predefined">$apply</span>(<span class="keyword">function</span>(){
                        scope.<span class="predefined">$eval</span>(attrs.ngEnter, {<span class="key"><span class="delimiter">'</span><span class="content">event</span><span class="delimiter">'</span></span>: event});
                    });
                    event.preventDefault();
                }
            });
        };
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>We are going to modify the UI slightly. E.g. We are going to remove the save button, if the user modifies the todo (either changes the name or completes),
we save the changes in the server.</p>
</div>
<div class="listingblock">
<div class="title">/complete-angularjs/templates/todos.html</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">list</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">add</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">addTodo()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>+ Add a New Task<span class="tag">&lt;/a&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">{'editing-item': editing, 'edited': todo.edited, 'completed': todo.completed}</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">ng-repeat</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo in todos | orderBy: 'completed'</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;input</span> <span class="attribute-name">ng-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo.completed</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">checkbox</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;span</span> <span class="attribute-name">ng-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo.completed = !todo.completed; todo.edited = true;saveTodo(todo);</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/span&gt;</span>
    <span class="tag">&lt;label</span> <span class="attribute-name">ng-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing = true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-hide</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      {{todo.name}}<span class="tag">&lt;/label&gt;</span>
    <span class="tag">&lt;input</span> <span class="attribute-name">ng-enter</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing=false;saveTodo(todo)</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-change</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo.edited = true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-blur</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing = false;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-show</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-model</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">todo.name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">editing-label</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">actions</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ng-click</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">deleteTodo(todo, $index)</span><span class="delimiter">&quot;</span></span>  <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Delete</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>delete<span class="tag">&lt;/a&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
   &lt;<span class="regexp"><span class="delimiter">/</span><span class="content">div&gt;
&lt;</span><span class="delimiter">/</span></span>div&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">/complete-angularjs/scripts/controllers/main.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="string"><span class="delimiter">'</span><span class="content">use strict</span><span class="delimiter">'</span></span>;

angular.module(<span class="string"><span class="delimiter">'</span><span class="content">todoListApp</span><span class="delimiter">'</span></span>)
.controller(<span class="string"><span class="delimiter">'</span><span class="content">mainCtrl</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$scope</span>, dataService) {
  <span class="predefined">$scope</span>.<span class="function">addTodo</span> = <span class="keyword">function</span>() {
          dataService.addTodo(<span class="keyword">function</span>(response) {
                  <span class="predefined">$scope</span>.todos.unshift(response.data);
        });
  };

  dataService.getTodos(<span class="keyword">function</span>(response) {
      <span class="predefined">$scope</span>.todos = response.data;
    });

  <span class="predefined">$scope</span>.<span class="function">deleteTodo</span> = <span class="keyword">function</span>(todo, <span class="predefined">$index</span>) {
    dataService.deleteTodo(todo, <span class="keyword">function</span>(response) {
            <span class="predefined">$scope</span>.todos.splice(<span class="predefined">$index</span>, <span class="integer">1</span>);
    });
  };

 <span class="predefined">$scope</span>.<span class="function">saveTodo</span> = <span class="keyword">function</span>(todo, <span class="predefined">$index</span>) {
    dataService.saveTodo(todo, <span class="keyword">function</span>(response) {
            console.log(response.data)
    });
  };
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Data service now connects to a Grails backend instead of loading a mock json file.</p>
</div>
<div class="listingblock">
<div class="title">/complete-angularjs/scripts/services/data.js</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="string"><span class="delimiter">'</span><span class="content">use strict</span><span class="delimiter">'</span></span>;

angular.module(<span class="string"><span class="delimiter">'</span><span class="content">todoListApp</span><span class="delimiter">'</span></span>)
.service(<span class="string"><span class="delimiter">'</span><span class="content">dataService</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(<span class="predefined">$http</span>) {

  <span class="keyword">var</span> todosGrailsServerUri = <span class="string"><span class="delimiter">'</span><span class="content">http://localhost:8080/todos</span><span class="delimiter">'</span></span>;

  <span class="local-variable">this</span>.<span class="function">getTodos</span> = <span class="keyword">function</span>(callback){
          <span class="predefined">$http</span>.get(todosGrailsServerUri).then(callback)
  };

  <span class="local-variable">this</span>.<span class="function">addTodo</span> = <span class="keyword">function</span>(callback) {
      <span class="keyword">var</span> todo = {<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">This is a new todo.</span><span class="delimiter">&quot;</span></span>, <span class="key">completed</span>: <span class="predefined-constant">false</span>};
      <span class="predefined">$http</span>.post(todosGrailsServerUri,todo).then(callback);
  }

  <span class="local-variable">this</span>.<span class="function">deleteTodo</span> = <span class="keyword">function</span>(todo, callback) {
      <span class="predefined">$http</span>.<span class="keyword">delete</span>(todosGrailsServerUri + <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span> + todo.id).then(callback);
  };

  <span class="local-variable">this</span>.<span class="function">saveTodo</span> = <span class="keyword">function</span>(todo, callback) {
      <span class="predefined">$http</span>.put(todosGrailsServerUri + <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span> + todo.id,todo).then(callback);
  };
});</code></pre>
</div>
</div>


<h1 id="runningTheApp">6 Running the Application</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/runningTheApp.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To run the application use the <code>./gradlew bootRun</code> command which will start the application on port 8080.</p>
</div>
<div class="paragraph">
<p>Open you angular app and you will enjoy a todo manager powered by a Grails backend.
You can refresh your browser without losing the changes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/complete.gif" alt="complete">
</div>
</div>


<h1 id="helpWithGrails">7 Do you need help with Grails?</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails-restapi-angularjs/edit/master/src/main/docs/guide/helpWithGrails.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<h3 style="color: #333;">OCI sponsored the creation of this Guide. OCI offers several <a href="https://objectcomputing.com/products/grails/consulting-support/">Grails services</a>:</h3>

<img src="../img/oci-grails-services.svg"/>

<h3>Free consultation </h3>

<!-- This is the code that is needed to run the form -->

<!--Copy and paste into the document's head or body.-->

<script type="text/javascript">

    /** This section is only needed once per page if manually copying **/
    if (typeof MauticSDKLoaded == 'undefined') {
        var MauticSDKLoaded = true;
        var head            = document.getElementsByTagName('head')[0];
        var script          = document.createElement('script');
        script.type         = 'text/javascript';
        script.src          = 'https://mautic.objectcomputing.com/media/js/mautic-form.js';
        script.onload       = function() {
            MauticSDK.onLoad();
        };
        head.appendChild(script);
        var MauticDomain = 'https://mautic.objectcomputing.com';
        var MauticLang   = {
            'submittingMessage': "Please wait..."
        }
    }
</script>

<!--Copy and paste into the document's body.-->

<style type="text/css" scoped>
    .mauticform_wrapper { max-width: 600px; margin: 10px auto; }
    .mauticform-innerform {}
    .mauticform-post-success {}
    .mauticform-name { font-weight: bold; font-size: 1.5em; margin-bottom: 3px; }
    .mauticform-description { margin-top: 2px; margin-bottom: 10px; }
    .mauticform-error { margin-bottom: 10px; color: red; }
    .mauticform-message { margin-bottom: 10px;color: green; }
    .mauticform-row { display: block; margin-bottom: 20px; }
    .mauticform-label { font-size: 1.1em; display: block; font-weight: bold; margin-bottom: 5px; }
    .mauticform-row.mauticform-required .mauticform-label:after { color: #e32; content: " *"; display: inline; }
    .mauticform-helpmessage { display: block; font-size: 0.9em; margin-bottom: 3px; }
    .mauticform-errormsg { display: block; color: red; margin-top: 2px; }
    .mauticform-selectbox, .mauticform-input, .mauticform-textarea { width: 100%; padding: 0.5em 0.5em; border: 1px solid #CCC; background: #fff; box-shadow: 0px 0px 0px #fff inset; border-radius: 4px; box-sizing: border-box; }
    .mauticform-checkboxgrp-row {}
    .mauticform-checkboxgrp-label { font-weight: normal; }
    .mauticform-checkboxgrp-checkbox {}
    .mauticform-radiogrp-row {}
    .mauticform-radiogrp-label { font-weight: normal; }
    .mauticform-radiogrp-radio {}
    .mauticform-button-wrapper .mauticform-button.btn-default, .mauticform-pagebreak-wrapper .mauticform-pagebreak.btn-default { font-size: 14px; color: #fff;background-color: #feb672 ;border-color: #dddddd; padding: 15px 30px;}
    .mauticform-button-wrapper .mauticform-button, .mauticform-pagebreak-wrapper .mauticform-pagebreak { display: inline-block;margin-bottom: 0;font-weight: 600;text-align: center;vertical-align: middle;cursor: pointer;background-image: none;border: 1px solid transparent;white-space: nowrap;padding: 6px 12px;font-size: 13px;line-height: 1.3856;border-radius: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}
    .mauticform-button-wrapper .mauticform-button.btn-default[disabled], .mauticform-pagebreak-wrapper .mauticform-pagebreak.btn-default[disabled] { background-color:#feb672; border-color: #dddddd; opacity: 0.75; cursor: not-allowed; font-size: 14px; color: #fff; padding: 15px 30px;}
    .mauticform-pagebreak-wrapper .mauticform-button-wrapper {  display: inline; }
</style>
<div id="mauticform_wrapper_grailsorgconsultationform" class="mauticform_wrapper">
    <form autocomplete="false" role="form" method="post" action="https://mautic.objectcomputing.com/form/submit?formId=3" id="mauticform_grailsorgconsultationform" data-mautic-form="grailsorgconsultationform">

        <div class="mauticform-innerform">

          <div class="mauticform-page-wrapper mauticform-page-1" data-mautic-form-page="1">

            <div id="mauticform_grailsorgconsultationform_first_name"  data-validate="first_name" data-validation-type="text" class="mauticform-row mauticform-text mauticform-field-1 mauticform-required col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_first_name" name="mauticform[first_name]" value="" placeholder="First Name *" class="mauticform-input" type="text" />
                <span class="mauticform-errormsg" style="display: none;">This is required.</span>
            </div>

            <div id="mauticform_grailsorgconsultationform_last_name"  data-validate="last_name" data-validation-type="text" class="mauticform-row mauticform-text mauticform-field-2 mauticform-required col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_last_name" name="mauticform[last_name]" value="" placeholder="Last Name *" class="mauticform-input" type="text" />
                <span class="mauticform-errormsg" style="display: none;">This is required.</span>
            </div>

            <div id="mauticform_grailsorgconsultationform_email"  data-validate="email" data-validation-type="email" class="mauticform-row mauticform-email mauticform-field-3 mauticform-required col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_email" name="mauticform[email]" value="" placeholder="Email *" class="mauticform-input" type="email" />
                <span class="mauticform-errormsg" style="display: none;">This is required.</span>
            </div>

            <div id="mauticform_grailsorgconsultationform_phone"  class="mauticform-row mauticform-tel mauticform-field-4 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_phone" name="mauticform[phone]" value="" placeholder="Phone" class="mauticform-input" type="tel" />
                <span class="mauticform-errormsg" style="display: none;"></span>
            </div>

            <div id="mauticform_grailsorgconsultationform_company"  class="mauticform-row mauticform-text mauticform-field-5 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <input id="mauticform_input_grailsorgconsultationform_company" name="mauticform[company]" value="" placeholder="Company" class="mauticform-input" type="text" />
                <span class="mauticform-errormsg" style="display: none;"></span>
            </div>

            <div id="mauticform_grailsorgconsultationform_submit"  class="mauticform-row mauticform-button-wrapper mauticform-field-6" style="">
                <button type="submit" name="mauticform[submit]" id="mauticform_input_grailsorgconsultationform_submit" name="mauticform[submit]" value="" class="mauticform-button btn btn-default" value="1" style="border: none; margin-left: 14px;">SUBMIT</button>
            </div>
            </div>
        </div>

        <input type="hidden" name="mauticform[formId]" id="mauticform_grailsorgconsultationform_id" value="3"/>
        <input type="hidden" name="mauticform[return]" id="mauticform_grailsorgconsultationform_return" value=""/>
        <input type="hidden" name="mauticform[formName]" id="mauticform_grailsorgconsultationform_name" value="grailsorgconsultationform"/>
</form>
</div>

<!--The code below is the message that appears when someone hits submit. Feel free to style this how you see fit for Grails.org. All CSS is handled in the above code.-->

<div class="mauticform-error" id="mauticform_grailsorgconsultationform_error"></div>
<div class="mauticform-message" id="mauticform_grailsorgconsultationform_message"></div>

<h3 style="color: #333;">The <a href="https://objectcomputing.com/products/grails/consulting-support/">OCI Grails Team</a>
includes Grails co-founders, <b>Jeff Scott Brown and Graeme Rocher</b>.
Check our <a href="https://objectcomputing.com/training/catalog/grails/">Grails courses</a> and learn from the engineers who developed,
matured and maintain Grails.</h3>

<img src="../img/ocigrailsteam.png" style="max-width: 748px; width: 100%;" alt="Grails OCI Team">

</article></div><footer>
  <div class='content'>
    <div class='ocihometograils'>
      <span>Sponsored by</span>
      <a href='https://objectcomputing.com/products/grails/'><img class='' src='../img/oci_home_to_grails.svg' alt='OCI Home to Grails' /></a>
    </div>
    <nav class='socialmedianav'><ul>
  <li>
    <a href='https://grails.slack.com'><img class='' src='../img/slack.svg' alt='Slack Icon' /></a>
  </li>
  <li>
    <a href='https://www.youtube.com/watch?v=XnRNfDGkBVg&amp;list=PLI74De5M9T73uH3WilDCePP2qfSDpMaGu'><img class='' src='../img/youtube.svg' alt='Youtube Icon' /></a>
  </li>
  <li>
    <a href='https://www.linkedin.com/groups/39757'><img class='' src='../img/linkedin.svg' alt='LinkedIn Icon' /></a>
  </li>
  <li>
    <a href='https://github.com/grails/'><img class='' src='../img/github.svg' alt='Github Icon' /></a>
  </li>
  <li>
    <a href='https://twitter.com/grailsframework'><img class='' src='../img/twitter.svg' alt='Twitter Icon' /></a>
  </li>
</ul></nav>
    <nav class='partnersnav'><ul>
  <li>Grails' repositories is hosted by
    <a href='http://artifactoryonline.com/'>Artifactory</a>
  </li>
  <li>Website hosting provided by
    <a href='http://run.pivotal.io/'>Pivotal</a>
  </li>
  <li>YourKit supports Grails with its 
    <a href='https://www.yourkit.com/java/profiler/index.jsp'>Java Profiler</a>
  </li>
  <li>Grails is Open Source
    <a href='http://www.apache.org/licenses/LICENSE-2.0.html'>Apache 2 License</a>
  </li>
</ul></nav>
  </div>
</footer><div>
  <script type='text/javascript'>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-82213539-2', 'auto');
              ga('send', 'pageview');
</script>
  <script type='text/javascript'>
adroll_adv_id = "HBWJH4CQCJGS5DJRSB4Z4D";
adroll_pix_id = "IVEQYFOZXZAPZMDVQH7BFE";
/* OPTIONAL: provide email to improve user identification */
/* adroll_email = "username@example.com"; */
(function () {
    var _onload = function(){
        if (document.readyState && !/loaded|complete/.test(document.readyState)){setTimeout(_onload, 10);return}
        if (!window.__adroll_loaded){__adroll_loaded=true;setTimeout(_onload, 50);return}
        var scr = document.createElement("script");
        var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
        scr.setAttribute('async', 'true');
        scr.type = "text/javascript";
        scr.src = host + "/j/roundtrip.js";
        ((document.getElementsByTagName('head') || [null])[0] ||
            document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
    };
    if (window.addEventListener) {window.addEventListener('load', _onload, false);}
    else {window.attachEvent('onload', _onload)}
}());            
</script>
</div></body>
</html>